{"version":3,"sources":["../../../../src/lib/tooltip/RSITooltip.js"],"names":["format","React","Component","PropTypes","displayValuesFor","GenericChartComponent","isDefined","functor","ToolTipText","ToolTipTSpanLabel","RSITooltip","props","renderSVG","bind","moreProps","onClick","fontFamily","fontSize","yAccessor","displayFormat","className","options","labelFill","textFill","chartConfig","width","height","currentItem","rsi","value","originProp","origin","x","y","tooltipLabel","windowSize","propTypes","oneOfType","array","func","isRequired","shape","number","string","defaultProps"],"mappings":"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","file":"RSITooltip.js","sourcesContent":["import { format } from 'd3-format';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport displayValuesFor from './displayValuesFor';\nimport GenericChartComponent from '../GenericChartComponent';\n\nimport { isDefined, functor } from '../utils';\nimport ToolTipText from './ToolTipText';\nimport ToolTipTSpanLabel from './ToolTipTSpanLabel';\n\nclass RSITooltip extends Component {\n  constructor(props) {\n    super(props);\n    this.renderSVG = this.renderSVG.bind(this);\n  }\n  renderSVG(moreProps) {\n    const {\n      onClick,\n      fontFamily,\n      fontSize,\n      yAccessor,\n      displayFormat,\n      className,\n    } = this.props;\n    const { options, labelFill, textFill } = this.props;\n    const { displayValuesFor } = this.props;\n    const {\n      chartConfig: { width, height },\n    } = moreProps;\n\n    const currentItem = displayValuesFor(this.props, moreProps);\n    const rsi = isDefined(currentItem) && yAccessor(currentItem);\n    const value = (rsi && displayFormat(rsi)) || 'n/a';\n\n    const { origin: originProp } = this.props;\n    const origin = functor(originProp);\n    const [x, y] = origin(width, height);\n\n    const tooltipLabel = `RSI (${options.windowSize}): `;\n    return (\n      <g\n        className={className}\n        transform={`translate(${x}, ${y})`}\n        onClick={onClick}\n      >\n        <ToolTipText x={0} y={0} fontFamily={fontFamily} fontSize={fontSize}>\n          <ToolTipTSpanLabel fill={labelFill}>{tooltipLabel}</ToolTipTSpanLabel>\n          <tspan fill={textFill}>{value}</tspan>\n        </ToolTipText>\n      </g>\n    );\n  }\n  render() {\n    return (\n      <GenericChartComponent\n        clip={false}\n        svgDraw={this.renderSVG}\n        drawOn={['mousemove']}\n      />\n    );\n  }\n}\n\nRSITooltip.propTypes = {\n  origin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]).isRequired,\n  options: PropTypes.shape({\n    windowSize: PropTypes.number.isRequired,\n  }).isRequired,\n  className: PropTypes.string,\n  fontFamily: PropTypes.string,\n  fontSize: PropTypes.number,\n  onClick: PropTypes.func,\n  yAccessor: PropTypes.func.isRequired,\n  displayFormat: PropTypes.func.isRequired,\n  displayValuesFor: PropTypes.func,\n  textFill: PropTypes.string,\n  labelFill: PropTypes.string,\n};\n\nRSITooltip.defaultProps = {\n  displayFormat: format('.2f'),\n  displayValuesFor: displayValuesFor,\n  origin: [0, 0],\n  className: 'react-stockcharts-tooltip',\n};\n\nexport default RSITooltip;\n"]}