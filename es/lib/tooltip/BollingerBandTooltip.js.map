{"version":3,"sources":["../../../../src/lib/tooltip/BollingerBandTooltip.js"],"names":["React","Component","PropTypes","format","displayValuesFor","GenericChartComponent","isDefined","functor","ToolTipText","ToolTipTSpanLabel","BollingerBandTooltip","props","renderSVG","bind","moreProps","onClick","displayFormat","yAccessor","options","textFill","labelFill","chartConfig","width","height","currentItem","top","middle","bottom","item","originProp","origin","x","y","sourcePath","windowSize","multiplier","movingAverageType","tooltipLabel","tooltipValue","className","fontFamily","fontSize","propTypes","string","func","isRequired","array","shape","number","defaultProps"],"mappings":"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","file":"BollingerBandTooltip.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { format } from 'd3-format';\nimport displayValuesFor from './displayValuesFor';\nimport GenericChartComponent from '../GenericChartComponent';\n\nimport { isDefined, functor } from '../utils';\nimport ToolTipText from './ToolTipText';\nimport ToolTipTSpanLabel from './ToolTipTSpanLabel';\n\nclass BollingerBandTooltip extends Component {\n  constructor(props) {\n    super(props);\n    this.renderSVG = this.renderSVG.bind(this);\n  }\n  renderSVG(moreProps) {\n    const { onClick, displayFormat, yAccessor, options, textFill, labelFill } =\n      this.props;\n    const { displayValuesFor } = this.props;\n\n    const {\n      chartConfig: { width, height },\n    } = moreProps;\n\n    const currentItem = displayValuesFor(this.props, moreProps);\n\n    let top, middle, bottom;\n    top = middle = bottom = 'n/a';\n\n    if (isDefined(currentItem) && isDefined(yAccessor(currentItem))) {\n      const item = yAccessor(currentItem);\n      top = displayFormat(item.top);\n      middle = displayFormat(item.middle);\n      bottom = displayFormat(item.bottom);\n    }\n\n    const { origin: originProp } = this.props;\n    const origin = functor(originProp);\n    const [x, y] = origin(width, height);\n\n    const { sourcePath, windowSize, multiplier, movingAverageType } = options;\n    const tooltipLabel = `BB(${sourcePath}, ${windowSize}, ${multiplier}, ${movingAverageType}): `;\n    const tooltipValue = `${top}, ${middle}, ${bottom}`;\n    return (\n      <g\n        transform={`translate(${x}, ${y})`}\n        className={this.props.className}\n        onClick={onClick}\n      >\n        <ToolTipText\n          x={0}\n          y={0}\n          fontFamily={this.props.fontFamily}\n          fontSize={this.props.fontSize}\n        >\n          <ToolTipTSpanLabel fill={labelFill}>{tooltipLabel}</ToolTipTSpanLabel>\n          <tspan fill={textFill}>{tooltipValue}</tspan>\n        </ToolTipText>\n      </g>\n    );\n  }\n  render() {\n    return (\n      <GenericChartComponent\n        clip={false}\n        svgDraw={this.renderSVG}\n        drawOn={['mousemove']}\n      />\n    );\n  }\n}\n\nBollingerBandTooltip.propTypes = {\n  className: PropTypes.string,\n  yAccessor: PropTypes.func.isRequired,\n  displayValuesFor: PropTypes.func,\n  displayFormat: PropTypes.func.isRequired,\n  origin: PropTypes.array.isRequired,\n  onClick: PropTypes.func,\n  options: PropTypes.shape({\n    sourcePath: PropTypes.string.isRequired,\n    windowSize: PropTypes.number.isRequired,\n    multiplier: PropTypes.number.isRequired,\n    movingAverageType: PropTypes.string.isRequired,\n  }).isRequired,\n  textFill: PropTypes.string,\n  labelFill: PropTypes.string,\n  fontFamily: PropTypes.string,\n  fontSize: PropTypes.number,\n};\n\nBollingerBandTooltip.defaultProps = {\n  className:\n    'react-stockcharts-tooltip react-stockcharts-bollingerband-tooltip',\n  displayFormat: format('.2f'),\n  displayValuesFor: displayValuesFor,\n  origin: [0, 10],\n};\n\nexport default BollingerBandTooltip;\n"]}