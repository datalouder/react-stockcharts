{"version":3,"sources":["../../../../src/lib/tooltip/StochasticTooltip.js"],"names":["format","React","Component","PropTypes","displayValuesFor","GenericChartComponent","functor","ToolTipText","ToolTipTSpanLabel","StochasticTooltip","props","renderSVG","bind","moreProps","onClick","fontFamily","fontSize","yAccessor","displayFormat","label","className","options","appearance","labelFill","chartConfig","width","height","currentItem","stroke","stochastic","K","D","originProp","origin","x","y","kLine","windowSize","kWindowSize","dLine","dWindowSize","propTypes","oneOfType","array","func","isRequired","string","number","shape","defaultProps"],"mappings":"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","file":"StochasticTooltip.js","sourcesContent":["import { format } from 'd3-format';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport displayValuesFor from './displayValuesFor';\nimport GenericChartComponent from '../GenericChartComponent';\n\nimport { functor } from '../utils';\n\nimport ToolTipText from './ToolTipText';\nimport ToolTipTSpanLabel from './ToolTipTSpanLabel';\n\nclass StochasticTooltip extends Component {\n  constructor(props) {\n    super(props);\n    this.renderSVG = this.renderSVG.bind(this);\n  }\n  renderSVG(moreProps) {\n    const { onClick, fontFamily, fontSize, yAccessor, displayFormat, label } =\n      this.props;\n    const { className, options, appearance, labelFill } = this.props;\n    const { displayValuesFor } = this.props;\n    const {\n      chartConfig: { width, height },\n    } = moreProps;\n\n    const currentItem = displayValuesFor(this.props, moreProps);\n    const { stroke } = appearance;\n    const stochastic = currentItem && yAccessor(currentItem);\n\n    const K =\n      (stochastic && stochastic.K && displayFormat(stochastic.K)) || 'n/a';\n    const D =\n      (stochastic && stochastic.D && displayFormat(stochastic.D)) || 'n/a';\n\n    const { origin: originProp } = this.props;\n    const origin = functor(originProp);\n    const [x, y] = origin(width, height);\n\n    return (\n      <g\n        className={className}\n        transform={`translate(${x}, ${y})`}\n        onClick={onClick}\n      >\n        <ToolTipText x={0} y={0} fontFamily={fontFamily} fontSize={fontSize}>\n          <ToolTipTSpanLabel\n            fill={labelFill}\n          >{`${label} %K(`}</ToolTipTSpanLabel>\n          <tspan\n            fill={stroke.kLine}\n          >{`${options.windowSize}, ${options.kWindowSize}`}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}>): </ToolTipTSpanLabel>\n          <tspan fill={stroke.kLine}>{K}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}> %D (</ToolTipTSpanLabel>\n          <tspan fill={stroke.dLine}>{options.dWindowSize}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}>): </ToolTipTSpanLabel>\n          <tspan fill={stroke.dLine}>{D}</tspan>\n        </ToolTipText>\n      </g>\n    );\n  }\n  render() {\n    return (\n      <GenericChartComponent\n        clip={false}\n        svgDraw={this.renderSVG}\n        drawOn={['mousemove']}\n      />\n    );\n  }\n}\n\nStochasticTooltip.propTypes = {\n  origin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]).isRequired,\n  className: PropTypes.string,\n  fontFamily: PropTypes.string,\n  fontSize: PropTypes.number,\n  labelFill: PropTypes.string,\n\n  onClick: PropTypes.func,\n  yAccessor: PropTypes.func.isRequired,\n  options: PropTypes.shape({\n    windowSize: PropTypes.number.isRequired,\n    kWindowSize: PropTypes.number.isRequired,\n    dWindowSize: PropTypes.number.isRequired,\n  }).isRequired,\n  appearance: PropTypes.shape({\n    stroke: {\n      dLine: PropTypes.string.isRequired,\n      kLine: PropTypes.string.isRequired,\n    }.isRequired,\n  }).isRequired,\n  displayFormat: PropTypes.func.isRequired,\n  displayValuesFor: PropTypes.func,\n  label: PropTypes.string.isRequired,\n};\n\nStochasticTooltip.defaultProps = {\n  displayFormat: format('.2f'),\n  displayValuesFor: displayValuesFor,\n  origin: [0, 0],\n  className: 'react-stockcharts-tooltip',\n  label: 'STO',\n};\n\nexport default StochasticTooltip;\n"]}