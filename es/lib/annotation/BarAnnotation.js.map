{"version":3,"sources":["../../../../src/lib/annotation/BarAnnotation.js"],"names":["React","Component","PropTypes","functor","BarAnnotation","props","handleClick","bind","e","onClick","xScale","yScale","datum","className","stroke","opacity","xAccessor","path","text","textXOffset","textYOffset","textAnchor","fontFamily","fontSize","textFill","textOpacity","textRotate","helper","x","y","fill","tooltip","textIcon","textIconFontSize","textIconFill","textIconOpacity","textIconRotate","textIconXOffset","textIconYOffset","plotData","xFunc","yFunc","xPos","yPos","getArrowForTextIcon","type","arrows","simpleUp","simpleDown","fatUp","fatDown","lightUp","lightDown","dashedUp","dashedDown","dashedRight","fatRight","right","propTypes","string","func","object","number","textIconAnchor","defaultProps"],"mappings":"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","file":"BarAnnotation.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { functor } from '../utils';\n\nclass BarAnnotation extends Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n  handleClick(e) {\n    const { onClick } = this.props;\n\n    if (onClick) {\n      const { xScale, yScale, datum } = this.props;\n      onClick({ xScale, yScale, datum }, e);\n    }\n  }\n  render() {\n    const { className, stroke, opacity } = this.props;\n    const { xAccessor, xScale, yScale, path } = this.props;\n    const {\n      text,\n      textXOffset,\n      textYOffset,\n      textAnchor,\n      fontFamily,\n      fontSize,\n      textFill,\n      textOpacity,\n      textRotate,\n    } = this.props;\n    const { x, y, fill, tooltip } = helper(\n      this.props,\n      xAccessor,\n      xScale,\n      yScale\n    );\n    const {\n      textIcon,\n      textIconFontSize,\n      textIconFill,\n      textIconOpacity,\n      textIconRotate,\n      textIconXOffset,\n      textIconYOffset,\n    } = this.props;\n\n    return (\n      <g className={className} onClick={this.handleClick}>\n        {tooltip != null ? <title>{tooltip}</title> : null}\n        {text != null ? (\n          <text\n            x={x}\n            y={y}\n            dx={textXOffset}\n            dy={textYOffset}\n            fontFamily={fontFamily}\n            fontSize={fontSize}\n            fill={textFill}\n            opacity={textOpacity}\n            transform={\n              textRotate != null ? `rotate(${textRotate}, ${x}, ${y})` : null\n            }\n            textAnchor={textAnchor}\n          >\n            {text}\n          </text>\n        ) : null}\n        {textIcon != null ? (\n          <text\n            x={x}\n            y={y}\n            dx={textIconXOffset}\n            dy={textIconYOffset}\n            fontSize={textIconFontSize}\n            fill={textIconFill}\n            opacity={textIconOpacity}\n            transform={\n              textIconRotate != null\n                ? `rotate(${textIconRotate}, ${x}, ${y})`\n                : null\n            }\n            textAnchor={textAnchor}\n          >\n            {textIcon}\n          </text>\n        ) : null}\n        {path != null ? (\n          <path\n            d={path({ x, y })}\n            stroke={stroke}\n            fill={fill}\n            opacity={opacity}\n          />\n        ) : null}\n      </g>\n    );\n  }\n}\n\nfunction helper(props, xAccessor, xScale, yScale) {\n  const { x, y, datum, fill, tooltip, plotData } = props;\n\n  const xFunc = functor(x);\n  const yFunc = functor(y);\n\n  const [xPos, yPos] = [\n    xFunc({ xScale, xAccessor, datum, plotData }),\n    yFunc({ yScale, datum, plotData }),\n  ];\n\n  return {\n    x: xPos,\n    y: yPos,\n    fill: functor(fill)(datum),\n    tooltip: functor(tooltip)(datum),\n  };\n}\n\n/**\n * any unicode can be applied.\n * @param {any} type\n */\n\nexport function getArrowForTextIcon(type) {\n  const arrows = {\n    simpleUp: '⬆',\n    simpleDown: '⬇',\n    fatUp: '▲',\n    fatDown: '▼',\n    lightUp: '↑',\n    lightDown: '↓',\n    dashedUp: '⇡',\n    dashedDown: '⇣',\n    dashedRight: '➟',\n    fatRight: '➡',\n    right: '➤',\n  };\n  return arrows[type];\n}\n\nBarAnnotation.propTypes = {\n  className: PropTypes.string,\n  path: PropTypes.func,\n  onClick: PropTypes.func,\n  xAccessor: PropTypes.func,\n  xScale: PropTypes.func,\n  yScale: PropTypes.func,\n  datum: PropTypes.object,\n  stroke: PropTypes.string,\n  fill: PropTypes.string,\n  opacity: PropTypes.number,\n  text: PropTypes.string,\n  textAnchor: PropTypes.string,\n  fontFamily: PropTypes.string,\n  fontSize: PropTypes.number,\n  textOpacity: PropTypes.number,\n  textFill: PropTypes.string,\n  textRotate: PropTypes.number,\n  textXOffset: PropTypes.number,\n  textYOffset: PropTypes.number,\n  textIcon: PropTypes.string,\n  textIconFontSize: PropTypes.number,\n  textIconOpacity: PropTypes.number,\n  textIconFill: PropTypes.string,\n  textIconRotate: PropTypes.number,\n  textIconXOffset: PropTypes.number,\n  textIconYOffset: PropTypes.number,\n  textIconAnchor: PropTypes.string,\n};\n\nBarAnnotation.defaultProps = {\n  className: 'react-stockcharts-bar-annotation',\n  opacity: 1,\n  fill: '#000000',\n  textAnchor: 'middle',\n  fontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif',\n  fontSize: 10,\n  textFill: '#000000',\n  textOpacity: 1,\n  textIconFill: '#000000',\n  textIconFontSize: 10,\n  x: ({ xScale, xAccessor, datum }) => xScale(xAccessor(datum)),\n};\n\nexport default BarAnnotation;\n"]}