{"version":3,"sources":["../../../src/lib/Chart.js"],"names":["React","PropTypes","scaleLinear","PureComponent","isNotDefined","noop","find","Chart","props","context","yScale","bind","listener","id","subscribe","unsubscribe","type","moreProps","state","e","onContextMenu","currentCharts","indexOf","chartConfig","each","copy","chartId","origin","x","y","children","propTypes","height","number","oneOfType","array","func","string","isRequired","yExtents","yExtentsCalculator","propName","componentName","Error","flipYScale","bool","padding","shape","top","bottom","node","defaultProps","yPan","yPanEnabled","contextTypes","childContextTypes","object"],"mappings":"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","file":"Chart.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { scaleLinear } from 'd3-scale';\n\nimport PureComponent from './utils/PureComponent';\nimport { isNotDefined, noop, find } from './utils';\n\nclass Chart extends PureComponent {\n  constructor(props, context) {\n    super(props, context);\n    this.yScale = this.yScale.bind(this);\n    this.listener = this.listener.bind(this);\n  }\n  componentWillMount() {\n    const { id } = this.props;\n    const { subscribe } = this.context;\n    subscribe('chart_' + id, {\n      listener: this.listener,\n    });\n  }\n  componentWillUnmount() {\n    const { id } = this.props;\n    const { unsubscribe } = this.context;\n    unsubscribe('chart_' + id);\n  }\n  listener(type, moreProps, state, e) {\n    const { id, onContextMenu } = this.props;\n\n    if (type === 'contextmenu') {\n      const { currentCharts } = moreProps;\n      if (currentCharts.indexOf(id) > -1) {\n        onContextMenu(moreProps, e);\n      }\n    }\n  }\n  yScale() {\n    const chartConfig = find(\n      this.context.chartConfig,\n      each => each.id === this.props.id\n    );\n    return chartConfig.yScale.copy();\n  }\n  getChildContext() {\n    const { id: chartId } = this.props;\n    const chartConfig = find(\n      this.context.chartConfig,\n      each => each.id === chartId\n    );\n\n    return {\n      chartId,\n      chartConfig,\n    };\n  }\n  render() {\n    const { origin } = find(\n      this.context.chartConfig,\n      each => each.id === this.props.id\n    );\n    const [x, y] = origin;\n\n    return <g transform={`translate(${x}, ${y})`}>{this.props.children}</g>;\n  }\n}\n\nChart.propTypes = {\n  height: PropTypes.number,\n  origin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n  id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n  yExtents: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n  yExtentsCalculator: function (props, propName, componentName) {\n    if (\n      isNotDefined(props.yExtents) &&\n      typeof props.yExtentsCalculator !== 'function'\n    )\n      return new Error(\n        'yExtents or yExtentsCalculator must' +\n          ` be present on ${componentName}. Validation failed.`\n      );\n  },\n  onContextMenu: PropTypes.func,\n  yScale: PropTypes.func,\n\n  flipYScale: PropTypes.bool,\n  padding: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.shape({\n      top: PropTypes.number,\n      bottom: PropTypes.number,\n    }),\n  ]),\n  children: PropTypes.node,\n};\n\nChart.defaultProps = {\n  id: 0,\n  origin: [0, 0],\n  padding: 0,\n  yScale: scaleLinear(),\n  flipYScale: false,\n  yPan: true,\n  yPanEnabled: false,\n  onContextMenu: noop,\n};\n\nChart.contextTypes = {\n  chartConfig: PropTypes.array,\n  subscribe: PropTypes.func.isRequired,\n  unsubscribe: PropTypes.func.isRequired,\n};\n\nChart.childContextTypes = {\n  chartConfig: PropTypes.object.isRequired,\n  chartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n};\n\nexport default Chart;\n"]}