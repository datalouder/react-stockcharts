{"version":3,"sources":["../../../../src/lib/coordinates/CurrentCoordinate.js"],"names":["React","Component","PropTypes","GenericChartComponent","isNotDefined","getMouseCanvas","CurrentCoordinate","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","circle","helper","fillStyle","fill","beginPath","arc","x","y","r","Math","PI","className","fillColor","Function","currentItem","propTypes","yAccessor","func","number","isRequired","string","defaultProps","show","xScale","yScale","chartConfig","xAccessor","xValue","yValue","round"],"mappings":"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","file":"CurrentCoordinate.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport GenericChartComponent from '../GenericChartComponent';\nimport { isNotDefined } from '../utils';\nimport { getMouseCanvas } from '../GenericComponent';\n\nclass CurrentCoordinate extends Component {\n  constructor(props) {\n    super(props);\n    this.renderSVG = this.renderSVG.bind(this);\n    this.drawOnCanvas = this.drawOnCanvas.bind(this);\n  }\n  drawOnCanvas(ctx, moreProps) {\n    const circle = helper(this.props, moreProps);\n    if (!circle) return null;\n\n    ctx.fillStyle = circle.fill;\n    ctx.beginPath();\n    ctx.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI, false);\n    ctx.fill();\n  }\n  renderSVG(moreProps) {\n    const { className } = this.props;\n\n    const circle = helper(this.props, moreProps);\n    if (!circle) return null;\n\n    const fillColor =\n      circle.fill instanceof Function\n        ? circle.fill(moreProps.currentItem)\n        : circle.fill;\n\n    return (\n      <circle\n        className={className}\n        cx={circle.x}\n        cy={circle.y}\n        r={circle.r}\n        fill={fillColor}\n      />\n    );\n  }\n  render() {\n    return (\n      <GenericChartComponent\n        svgDraw={this.renderSVG}\n        canvasDraw={this.drawOnCanvas}\n        canvasToDraw={getMouseCanvas}\n        drawOn={['mousemove', 'pan']}\n      />\n    );\n  }\n}\n\nCurrentCoordinate.propTypes = {\n  yAccessor: PropTypes.func,\n  r: PropTypes.number.isRequired,\n  className: PropTypes.string,\n};\n\nCurrentCoordinate.defaultProps = {\n  r: 3,\n  className: 'react-stockcharts-current-coordinate',\n};\n\nfunction helper(props, moreProps) {\n  const { fill, yAccessor, r } = props;\n\n  const {\n    show,\n    xScale,\n    chartConfig: { yScale },\n    currentItem,\n    xAccessor,\n  } = moreProps;\n\n  // console.log(show);\n  if (!show || isNotDefined(currentItem)) return null;\n\n  const xValue = xAccessor(currentItem);\n  const yValue = yAccessor(currentItem);\n\n  if (isNotDefined(yValue)) return null;\n\n  // console.log(chartConfig);\n  const x = Math.round(xScale(xValue));\n  const y = Math.round(yScale(yValue));\n\n  return { x, y, r, fill };\n}\n\nexport default CurrentCoordinate;\n"]}