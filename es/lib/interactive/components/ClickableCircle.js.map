{"version":3,"sources":["../../../../../src/lib/interactive/components/ClickableCircle.js"],"names":["React","Component","PropTypes","GenericChartComponent","getMouseCanvas","isDefined","noop","hexToRGBA","ClickableCircle","props","saveNode","bind","renderSVG","drawOnCanvas","isHover","node","moreProps","mouseXY","r","helper","x","y","mx","my","hover","ctx","stroke","strokeWidth","fill","fillOpacity","strokeOpacity","lineWidth","fillStyle","strokeStyle","beginPath","arc","Math","PI","interactiveCursorClass","show","onDragStart","onDrag","onDragComplete","xyProvider","cx","cy","xScale","yScale","chartConfig","propTypes","func","isRequired","number","string","className","bool","defaultProps","onMove"],"mappings":"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","file":"ClickableCircle.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport GenericChartComponent from '../../GenericChartComponent';\nimport { getMouseCanvas } from '../../GenericComponent';\n\nimport { isDefined, noop, hexToRGBA } from '../../utils';\n\nclass ClickableCircle extends Component {\n  constructor(props) {\n    super(props);\n    this.saveNode = this.saveNode.bind(this);\n    this.renderSVG = this.renderSVG.bind(this);\n    this.drawOnCanvas = this.drawOnCanvas.bind(this);\n    this.isHover = this.isHover.bind(this);\n  }\n  saveNode(node) {\n    this.node = node;\n  }\n  isHover(moreProps) {\n    const { mouseXY } = moreProps;\n    // const { r } = this.props;\n    const r = this.props.r + 7;\n    const [x, y] = helper(this.props, moreProps);\n\n    const [mx, my] = mouseXY;\n    const hover = x - r < mx && mx < x + r && y - r < my && my < y + r;\n\n    // console.log(\"hover->\", hover);\n    return hover;\n  }\n  drawOnCanvas(ctx, moreProps) {\n    const { stroke, strokeWidth, fill } = this.props;\n    const { fillOpacity, strokeOpacity } = this.props;\n    const { r } = this.props;\n\n    const [x, y] = helper(this.props, moreProps);\n\n    ctx.lineWidth = strokeWidth;\n    ctx.fillStyle = hexToRGBA(fill, fillOpacity);\n    ctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\n\n    ctx.beginPath();\n    ctx.arc(x, y, r, 0, 2 * Math.PI, false);\n    ctx.fill();\n    ctx.stroke();\n  }\n  renderSVG(moreProps) {\n    const { stroke, strokeWidth, fill } = this.props;\n    const { fillOpacity, strokeOpacity } = this.props;\n    const { r } = this.props;\n\n    const [x, y] = helper(this.props, moreProps);\n\n    return (\n      <circle\n        cx={x}\n        cy={y}\n        r={r}\n        strokeWidth={strokeWidth}\n        stroke={stroke}\n        strokeOpacity={strokeOpacity}\n        fill={fill}\n        fillOpacity={fillOpacity}\n      />\n    );\n  }\n  render() {\n    const { interactiveCursorClass } = this.props;\n    const { show } = this.props;\n    const { onDragStart, onDrag, onDragComplete } = this.props;\n\n    return show ? (\n      <GenericChartComponent\n        ref={this.saveNode}\n        interactiveCursorClass={interactiveCursorClass}\n        selected\n        isHover={this.isHover}\n        onDragStart={onDragStart}\n        onDrag={onDrag}\n        onDragComplete={onDragComplete}\n        svgDraw={this.renderSVG}\n        canvasDraw={this.drawOnCanvas}\n        canvasToDraw={getMouseCanvas}\n        drawOn={['pan', 'mousemove', 'drag']}\n      />\n    ) : null;\n  }\n}\n\nfunction helper(props, moreProps) {\n  const { xyProvider, cx, cy } = props;\n\n  if (isDefined(xyProvider)) {\n    return xyProvider(moreProps);\n  }\n\n  const {\n    xScale,\n    chartConfig: { yScale },\n  } = moreProps;\n\n  const x = xScale(cx);\n  const y = yScale(cy);\n  return [x, y];\n}\nClickableCircle.propTypes = {\n  xyProvider: PropTypes.func,\n\n  onDragStart: PropTypes.func.isRequired,\n  onDrag: PropTypes.func.isRequired,\n  onDragComplete: PropTypes.func.isRequired,\n  strokeWidth: PropTypes.number.isRequired,\n  stroke: PropTypes.string.isRequired,\n  fill: PropTypes.string.isRequired,\n  r: PropTypes.number.isRequired,\n\n  cx: PropTypes.number,\n  cy: PropTypes.number,\n\n  className: PropTypes.string.isRequired,\n  show: PropTypes.bool.isRequired,\n  strokeOpacity: PropTypes.number.isRequired,\n  fillOpacity: PropTypes.number.isRequired,\n  interactiveCursorClass: PropTypes.string,\n};\n\nClickableCircle.defaultProps = {\n  className: 'react-stockcharts-interactive-line-edge',\n  onDragStart: noop,\n  onDrag: noop,\n  onDragComplete: noop,\n  onMove: noop,\n  show: false,\n  fillOpacity: 1,\n  strokeOpacity: 1,\n};\n\nexport default ClickableCircle;\n"]}