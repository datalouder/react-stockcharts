{"version":3,"sources":["../../../../../src/lib/interactive/wrapper/EachLinearRegressionChannel.js"],"names":["React","Component","PropTypes","noop","getCurrentItem","saveNodeType","isHover","HoverTextNearMouse","default","LinearRegressionChannelWithArea","edge1Provider","edge2Provider","ClickableCircle","EachLinearRegressionChannel","props","handleEdge1Drag","bind","handleEdge2Drag","handleHover","nodes","state","hover","moreProps","index","onDrag","snapTo","x2Value","getNewXY","x1Value","hovering","setState","appearance","edgeInteractiveCursor","hoverText","interactive","selected","onDragComplete","stroke","strokeWidth","strokeOpacity","fill","fillOpacity","r","edgeStrokeWidth","edgeFill","edgeStroke","hoverHandler","onHover","onUnHover","hoverTextEnabled","enable","hoverTextSelected","selectedText","hoverTextUnselected","text","restHoverTextProps","xScale","xAccessor","plotData","mouseXY","currentItem","x","y","propTypes","defaultClassName","string","any","isRequired","number","shape","func","bool","object","defaultProps","bgHeight","bgWidth"],"mappings":"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","file":"EachLinearRegressionChannel.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { noop } from '../../utils';\nimport { getCurrentItem } from '../../utils/ChartDataUtil';\nimport { saveNodeType, isHover } from '../utils';\n\nimport HoverTextNearMouse from '../components/HoverTextNearMouse';\nimport {\n  default as LinearRegressionChannelWithArea,\n  edge1Provider,\n  edge2Provider,\n} from '../components/LinearRegressionChannelWithArea';\n\nimport ClickableCircle from '../components/ClickableCircle';\n\nclass EachLinearRegressionChannel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEdge1Drag = this.handleEdge1Drag.bind(this);\n    this.handleEdge2Drag = this.handleEdge2Drag.bind(this);\n\n    this.handleHover = this.handleHover.bind(this);\n\n    this.isHover = isHover.bind(this);\n    this.saveNodeType = saveNodeType.bind(this);\n    this.nodes = {};\n\n    this.state = {\n      hover: false,\n    };\n  }\n  handleEdge1Drag(moreProps) {\n    const { index, onDrag, snapTo } = this.props;\n    const { x2Value } = this.props;\n\n    const [x1Value] = getNewXY(moreProps, snapTo);\n\n    onDrag(index, {\n      x1Value,\n      x2Value,\n    });\n  }\n  handleEdge2Drag(moreProps) {\n    const { index, onDrag, snapTo } = this.props;\n    const { x1Value } = this.props;\n\n    const [x2Value] = getNewXY(moreProps, snapTo);\n\n    onDrag(index, {\n      x1Value,\n      x2Value,\n    });\n  }\n  handleHover(moreProps) {\n    if (this.state.hover !== moreProps.hovering) {\n      this.setState({\n        hover: moreProps.hovering,\n      });\n    }\n  }\n  render() {\n    const {\n      x1Value,\n      x2Value,\n      appearance,\n      edgeInteractiveCursor,\n      hoverText,\n      interactive,\n      selected,\n      onDragComplete,\n    } = this.props;\n    const {\n      stroke,\n      strokeWidth,\n      strokeOpacity,\n      fill,\n      fillOpacity,\n      r,\n      edgeStrokeWidth,\n      edgeFill,\n      edgeStroke,\n    } = appearance;\n    const { hover } = this.state;\n\n    const hoverHandler = interactive\n      ? { onHover: this.handleHover, onUnHover: this.handleHover }\n      : {};\n\n    const {\n      enable: hoverTextEnabled,\n      selectedText: hoverTextSelected,\n      text: hoverTextUnselected,\n      ...restHoverTextProps\n    } = hoverText;\n\n    return (\n      <g>\n        <LinearRegressionChannelWithArea\n          ref={this.saveNodeType('area')}\n          selected={selected || hover}\n          {...hoverHandler}\n          x1Value={x1Value}\n          x2Value={x2Value}\n          fill={fill}\n          stroke={stroke}\n          strokeWidth={hover || selected ? strokeWidth + 1 : strokeWidth}\n          strokeOpacity={strokeOpacity}\n          fillOpacity={fillOpacity}\n        />\n        <ClickableCircle\n          ref={this.saveNodeType('edge1')}\n          show={selected || hover}\n          xyProvider={edge1Provider(this.props)}\n          r={r}\n          fill={edgeFill}\n          stroke={edgeStroke}\n          strokeWidth={edgeStrokeWidth}\n          interactiveCursorClass={edgeInteractiveCursor}\n          onDrag={this.handleEdge1Drag}\n          onDragComplete={onDragComplete}\n        />\n        <ClickableCircle\n          ref={this.saveNodeType('edge2')}\n          show={selected || hover}\n          xyProvider={edge2Provider(this.props)}\n          r={r}\n          fill={edgeFill}\n          stroke={edgeStroke}\n          strokeWidth={edgeStrokeWidth}\n          interactiveCursorClass={edgeInteractiveCursor}\n          onDrag={this.handleEdge2Drag}\n          onDragComplete={onDragComplete}\n        />\n        <HoverTextNearMouse\n          show={hoverTextEnabled && hover}\n          {...restHoverTextProps}\n          text={selected ? hoverTextSelected : hoverTextUnselected}\n        />\n      </g>\n    );\n  }\n}\n\nexport function getNewXY(moreProps, snapTo) {\n  const { xScale, xAccessor, plotData, mouseXY } = moreProps;\n\n  const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n  const x = xAccessor(currentItem);\n  const y = snapTo(currentItem);\n\n  return [x, y];\n}\n\nEachLinearRegressionChannel.propTypes = {\n  defaultClassName: PropTypes.string,\n\n  x1Value: PropTypes.any.isRequired,\n  x2Value: PropTypes.any.isRequired,\n\n  index: PropTypes.number,\n\n  appearance: PropTypes.shape({\n    stroke: PropTypes.string.isRequired,\n    fillOpacity: PropTypes.number.isRequired,\n    strokeOpacity: PropTypes.number.isRequired,\n    strokeWidth: PropTypes.number.isRequired,\n    fill: PropTypes.string.isRequired,\n    edgeStrokeWidth: PropTypes.number.isRequired,\n    edgeStroke: PropTypes.string.isRequired,\n    edgeFill: PropTypes.string.isRequired,\n    r: PropTypes.number.isRequired,\n  }).isRequired,\n\n  edgeInteractiveCursor: PropTypes.string,\n  onDrag: PropTypes.func.isRequired,\n  onDragComplete: PropTypes.func.isRequired,\n  snapTo: PropTypes.func,\n  interactive: PropTypes.bool.isRequired,\n  selected: PropTypes.bool.isRequired,\n\n  hoverText: PropTypes.object.isRequired,\n};\n\nEachLinearRegressionChannel.defaultProps = {\n  onDrag: noop,\n  onDragComplete: noop,\n\n  appearance: {\n    stroke: '#000000',\n    fillOpacity: 0.7,\n    strokeOpacity: 1,\n    strokeWidth: 1,\n    fill: '#8AAFE2',\n    edgeStrokeWidth: 2,\n    edgeStroke: '#000000',\n    edgeFill: '#FFFFFF',\n    r: 5,\n  },\n  interactive: true,\n  selected: false,\n  hoverText: {\n    ...HoverTextNearMouse.defaultProps,\n    enable: true,\n    bgHeight: 18,\n    bgWidth: 175,\n    text: 'Click and drag the edge circles',\n  },\n};\n\nexport default EachLinearRegressionChannel;\n"]}