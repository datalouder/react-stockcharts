{"version":3,"sources":["../../../../src/lib/indicator/heikinAshi.js"],"names":["heikinAshi","baseIndicator","rebind","merge","ALGORITHM_TYPE","base","type","accessor","d","ha","underlyingAlgorithm","mergedAlgorithm","algorithm","datum","indicator","data","options","Error"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,eAA3B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;AAEA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,UAA9B;;AAEA,IAAMC,iBAAiB,YAAvB;;AAEA,eAAe,YAAY;AACzB,MAAMC,OAAOJ,gBACVK,IADU,CACLF,cADK,EAEVG,QAFU,CAED;AAAA,WAAKC,EAAEC,EAAP;AAAA,GAFC,CAAb;;AAIA,MAAMC,sBAAsBV,YAA5B;;AAEA,MAAMW,kBAAkBR,QACrBS,SADqB,CACXF,mBADW,EAErBP,KAFqB,CAEf,UAACU,KAAD,EAAQC,SAAR,EAAsB;AAC3B,wBAAYD,KAAZ,EAAsBC,SAAtB;AACD,GAJqB,CAAxB;;AAMA,MAAMA,YAAY,SAAZA,SAAY,CAAUC,IAAV,EAA2C;AAAA,QAA3BC,OAA2B,uEAAjB,EAAEb,OAAO,IAAT,EAAiB;;AAC3D,QAAIa,QAAQb,KAAZ,EAAmB;AACjB,UAAI,CAACE,KAAKE,QAAL,EAAL,EACE,MAAM,IAAIU,KAAJ,yBACkBb,cADlB,yBAAN;AAGF,aAAOO,gBAAgBI,IAAhB,CAAP;AACD;AACD,WAAOL,oBAAoBK,IAApB,CAAP;AACD,GATD;;AAWAb,SAAOY,SAAP,EAAkBT,IAAlB,EAAwB,UAAxB,EAAoC,QAApC,EAA8C,MAA9C,EAAsD,MAAtD,EAA8D,MAA9D;AACA;AACAH,SAAOY,SAAP,EAAkBH,eAAlB,EAAmC,OAAnC;;AAEA,SAAOG,SAAP;AACD","file":"heikinAshi.js","sourcesContent":["import { heikinAshi } from '../calculator';\nimport baseIndicator from './baseIndicator';\n\nimport { rebind, merge } from '../utils';\n\nconst ALGORITHM_TYPE = 'HeikinAshi';\n\nexport default function () {\n  const base = baseIndicator()\n    .type(ALGORITHM_TYPE)\n    .accessor(d => d.ha);\n\n  const underlyingAlgorithm = heikinAshi();\n\n  const mergedAlgorithm = merge()\n    .algorithm(underlyingAlgorithm)\n    .merge((datum, indicator) => {\n      return { ...datum, ...indicator };\n    });\n\n  const indicator = function (data, options = { merge: true }) {\n    if (options.merge) {\n      if (!base.accessor())\n        throw new Error(\n          `Set an accessor to ${ALGORITHM_TYPE} before calculating`\n        );\n      return mergedAlgorithm(data);\n    }\n    return underlyingAlgorithm(data);\n  };\n\n  rebind(indicator, base, 'accessor', 'stroke', 'fill', 'echo', 'type');\n  // rebind(indicator, underlyingAlgorithm, \"windowSize\", \"source\");\n  rebind(indicator, mergedAlgorithm, 'merge');\n\n  return indicator;\n}\n"]}