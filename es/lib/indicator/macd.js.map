{"version":3,"sources":["../../../../src/lib/indicator/macd.js"],"names":["rebind","merge","macd","baseIndicator","MACD","appearanceOptions","ALGORITHM_TYPE","base","type","fill","stroke","accessor","d","underlyingAlgorithm","mergedAlgorithm","algorithm","datum","indicator","data","options","Error"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,KAAjB,QAA8B,UAA9B;;AAEA,SAASC,IAAT,QAAqB,eAArB;;AAEA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,QAAQC,iBAAjB,QAA0C,+BAA1C;;AAEA,IAAMC,iBAAiB,MAAvB;;AAEA,eAAe,YAAY;AACzB,MAAMC,OAAOJ,gBACVK,IADU,CACLF,cADK,EAEVG,IAFU,CAELJ,kBAAkBI,IAFb,EAGVC,MAHU,CAGHL,kBAAkBK,MAHf,EAIVC,QAJU,CAID;AAAA,WAAKC,EAAEV,IAAP;AAAA,GAJC,CAAb;;AAMA,MAAMW,sBAAsBX,MAA5B;;AAEA,MAAMY,kBAAkBb,QACrBc,SADqB,CACXF,mBADW,EAErBZ,KAFqB,CAEf,UAACe,KAAD,EAAQC,SAAR,EAAsB;AAC3BD,UAAMd,IAAN,GAAae,SAAb;AACD,GAJqB,CAAxB;;AAMA,MAAMA,YAAY,SAAZA,SAAY,CAAUC,IAAV,EAA2C;AAAA,QAA3BC,OAA2B,uEAAjB,EAAElB,OAAO,IAAT,EAAiB;;AAC3D,QAAIkB,QAAQlB,KAAZ,EAAmB;AACjB,UAAI,CAACM,KAAKI,QAAL,EAAL,EACE,MAAM,IAAIS,KAAJ,yBACkBd,cADlB,yBAAN;AAGF,aAAOQ,gBAAgBI,IAAhB,CAAP;AACD;AACD,WAAOL,oBAAoBK,IAApB,CAAP;AACD,GATD;;AAWAlB,SAAOiB,SAAP,EAAkBV,IAAlB,EAAwB,IAAxB,EAA8B,UAA9B,EAA0C,QAA1C,EAAoD,MAApD,EAA4D,MAA5D,EAAoE,MAApE;AACAP,SAAOiB,SAAP,EAAkBJ,mBAAlB,EAAuC,SAAvC,EAAkD,iBAAlD;AACAb,SAAOiB,SAAP,EAAkBH,eAAlB,EAAmC,OAAnC,EAA4C,eAA5C;;AAEA,SAAOG,SAAP;AACD","file":"macd.js","sourcesContent":["import { rebind, merge } from '../utils';\n\nimport { macd } from '../calculator';\n\nimport baseIndicator from './baseIndicator';\nimport { MACD as appearanceOptions } from './defaultOptionsForAppearance';\n\nconst ALGORITHM_TYPE = 'MACD';\n\nexport default function () {\n  const base = baseIndicator()\n    .type(ALGORITHM_TYPE)\n    .fill(appearanceOptions.fill)\n    .stroke(appearanceOptions.stroke)\n    .accessor(d => d.macd);\n\n  const underlyingAlgorithm = macd();\n\n  const mergedAlgorithm = merge()\n    .algorithm(underlyingAlgorithm)\n    .merge((datum, indicator) => {\n      datum.macd = indicator;\n    });\n\n  const indicator = function (data, options = { merge: true }) {\n    if (options.merge) {\n      if (!base.accessor())\n        throw new Error(\n          `Set an accessor to ${ALGORITHM_TYPE} before calculating`\n        );\n      return mergedAlgorithm(data);\n    }\n    return underlyingAlgorithm(data);\n  };\n\n  rebind(indicator, base, 'id', 'accessor', 'stroke', 'fill', 'echo', 'type');\n  rebind(indicator, underlyingAlgorithm, 'options', 'undefinedLength');\n  rebind(indicator, mergedAlgorithm, 'merge', 'skipUndefined');\n\n  return indicator;\n}\n"]}