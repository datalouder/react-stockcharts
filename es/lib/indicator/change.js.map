{"version":3,"sources":["../../../../src/lib/indicator/change.js"],"names":["rebind","merge","change","baseIndicator","ALGORITHM_TYPE","base","type","underlyingAlgorithm","mergedAlgorithm","algorithm","datum","indicator","absoluteChange","percentChange","data","options"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,KAAjB,QAA8B,UAA9B;;AAEA,SAASC,MAAT,QAAuB,eAAvB;;AAEA,OAAOC,aAAP,MAA0B,iBAA1B;;AAEA,IAAMC,iBAAiB,QAAvB;;AAEA,eAAe,YAAY;AACzB,MAAMC,OAAOF,gBAAgBG,IAAhB,CAAqBF,cAArB,CAAb;;AAEA,MAAMG,sBAAsBL,QAA5B;;AAEA,MAAMM,kBAAkBP,QACrBQ,SADqB,CACXF,mBADW,EAErBN,KAFqB,CAEf,UAACS,KAAD,EAAQC,SAAR,EAAsB;AAC3BD,UAAME,cAAN,GAAuBD,UAAUC,cAAjC;AACAF,UAAMG,aAAN,GAAsBF,UAAUE,aAAhC;AACD,GALqB,CAAxB;;AAOA,MAAMF,YAAY,SAAZA,SAAY,CAAUG,IAAV,EAA2C;AAAA,QAA3BC,OAA2B,uEAAjB,EAAEd,OAAO,IAAT,EAAiB;;AAC3D,QAAIc,QAAQd,KAAZ,EAAmB;AACjB,aAAOO,gBAAgBM,IAAhB,CAAP;AACD;AACD,WAAOP,oBAAoBO,IAApB,CAAP;AACD,GALD;AAMAd,SAAOW,SAAP,EAAkBN,IAAlB,EAAwB,IAAxB,EAA8B,UAA9B,EAA0C,QAA1C,EAAoD,MAApD,EAA4D,MAA5D,EAAoE,MAApE;AACAL,SAAOW,SAAP,EAAkBJ,mBAAlB,EAAuC,SAAvC;AACAP,SAAOW,SAAP,EAAkBH,eAAlB,EAAmC,OAAnC,EAA4C,eAA5C;;AAEA,SAAOG,SAAP;AACD","file":"change.js","sourcesContent":["import { rebind, merge } from '../utils';\n\nimport { change } from '../calculator';\n\nimport baseIndicator from './baseIndicator';\n\nconst ALGORITHM_TYPE = 'Change';\n\nexport default function () {\n  const base = baseIndicator().type(ALGORITHM_TYPE);\n\n  const underlyingAlgorithm = change();\n\n  const mergedAlgorithm = merge()\n    .algorithm(underlyingAlgorithm)\n    .merge((datum, indicator) => {\n      datum.absoluteChange = indicator.absoluteChange;\n      datum.percentChange = indicator.percentChange;\n    });\n\n  const indicator = function (data, options = { merge: true }) {\n    if (options.merge) {\n      return mergedAlgorithm(data);\n    }\n    return underlyingAlgorithm(data);\n  };\n  rebind(indicator, base, 'id', 'accessor', 'stroke', 'fill', 'echo', 'type');\n  rebind(indicator, underlyingAlgorithm, 'options');\n  rebind(indicator, mergedAlgorithm, 'merge', 'skipUndefined');\n\n  return indicator;\n}\n"]}