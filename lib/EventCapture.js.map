{"version":3,"sources":["../../src/lib/EventCapture.js"],"names":["EventCapture","props","handleEnter","bind","handleLeave","handleWheel","handleMouseMove","handleMouseDown","handlePanEnd","handlePan","handleTouchStart","handleTouchMove","handlePinchZoom","handlePinchZoomEnd","handleClick","handleRightClick","handleDrag","handleDragEnd","shouldPan","canPan","setCursorClass","saveNode","mouseInside","mouseInteraction","state","panInProgress","node","focus","on","MOUSEENTER","MOUSELEAVE","addEventListener","passive","componentDidMount","win","MOUSEMOVE","removeEventListener","e","d3Event","onMouseEnter","dragInProgress","onMouseLeave","zoom","onZoom","yZoom","Math","abs","deltaY","deltaX","mouseXY","preventDefault","zoomDir","panStart","panStartXScale","chartsToPan","lastNewPos","panHappened","dx","dy","dxdy","onPan","xScale","chartConfig","currentCharts","setState","panOrigin","queuePanEnd","panEndTimeout","clearTimeout","setTimeout","onMouseMove","mouseMove","newPos","onClick","onDoubleClick","dragHappened","clicked","stopPropagation","onContextMenu","onPanEnd","getBoundingClientRect","MOUSEUP","onDrag","startPos","dragStartPosition","onDragComplete","getAllPanConditions","initialPanEnabled","pan","reduce","returnObj","a","draggable","panEnabled","somethingSelected","button","onMouseDown","onDragStart","TOUCHMOVE","TOUCHEND","touchXY","touches","length","touch1Pos","touch2Pos","pinchZoomStart","range","zoomEnabled","onPinchZoom","initialPinch","onPinchZoomEnd","cursorOverrideClass","height","width","disableInteraction","useCrossHairStyleCursor","className","interactionProps","onTouchStart","onTouchMove","opacity","Component","propTypes","PropTypes","bool","isRequired","panSpeedMultiplier","number","array","func","xAccessor","children","defaultProps","noop"],"mappings":"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","file":"EventCapture.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { select, event as d3Event, mouse, touches } from 'd3-selection';\n\nimport {\n  isDefined,\n  mousePosition,\n  touchPosition,\n  getTouchProps,\n  d3Window,\n  MOUSEMOVE,\n  MOUSEUP,\n  MOUSEENTER,\n  MOUSELEAVE,\n  TOUCHMOVE,\n  TOUCHEND,\n  noop,\n} from './utils';\nimport { getCurrentCharts } from './utils/ChartDataUtil';\n// import { clearTimeout, setTimeout } from \"timers\";\n\nclass EventCapture extends Component {\n  constructor(props) {\n    super(props);\n    this.handleEnter = this.handleEnter.bind(this);\n    this.handleLeave = this.handleLeave.bind(this);\n    this.handleWheel = this.handleWheel.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handlePanEnd = this.handlePanEnd.bind(this);\n    this.handlePan = this.handlePan.bind(this);\n    this.handleTouchStart = this.handleTouchStart.bind(this);\n    this.handleTouchMove = this.handleTouchMove.bind(this);\n    this.handlePinchZoom = this.handlePinchZoom.bind(this);\n    this.handlePinchZoomEnd = this.handlePinchZoomEnd.bind(this);\n\n    this.handleClick = this.handleClick.bind(this);\n\n    this.handleRightClick = this.handleRightClick.bind(this);\n    this.handleDrag = this.handleDrag.bind(this);\n    this.handleDragEnd = this.handleDragEnd.bind(this);\n\n    this.shouldPan = this.shouldPan.bind(this);\n    this.canPan = this.canPan.bind(this);\n\n    this.setCursorClass = this.setCursorClass.bind(this);\n    this.saveNode = this.saveNode.bind(this);\n\n    this.mouseInside = false;\n\n    this.mouseInteraction = true;\n    this.state = {\n      panInProgress: false,\n    };\n  }\n  saveNode(node) {\n    this.node = node;\n  }\n  componentWillMount() {\n    this.focus = this.props.focus;\n  }\n  componentDidMount() {\n    if (this.node) {\n      select(this.node)\n        .on(MOUSEENTER, this.handleEnter)\n        .on(MOUSELEAVE, this.handleLeave);\n\n      this.node.addEventListener('wheel', this.handleWheel, { passive: false });\n    }\n  }\n  componentDidUpdate() {\n    this.componentDidMount();\n  }\n  componentWillUnmount() {\n    if (this.node) {\n      select(this.node).on(MOUSEENTER, null).on(MOUSELEAVE, null);\n      const win = d3Window(this.node);\n      select(win).on(MOUSEMOVE, null);\n\n      this.node.removeEventListener('wheel', this.handleWheel, {\n        passive: false,\n      });\n    }\n  }\n  handleEnter() {\n    const e = d3Event;\n\n    const { onMouseEnter } = this.props;\n    this.mouseInside = true;\n    if (!this.state.panInProgress && !this.state.dragInProgress) {\n      const win = d3Window(this.node);\n      select(win).on(MOUSEMOVE, this.handleMouseMove);\n    }\n    onMouseEnter(e);\n  }\n  handleLeave(e) {\n    const { onMouseLeave } = this.props;\n    this.mouseInside = false;\n    if (!this.state.panInProgress && !this.state.dragInProgress) {\n      const win = d3Window(this.node);\n      select(win).on(MOUSEMOVE, null);\n    }\n    onMouseLeave(e);\n  }\n  handleWheel(e) {\n    const { zoom, onZoom } = this.props;\n    const { panInProgress } = this.state;\n\n    const yZoom =\n      Math.abs(e.deltaY) > Math.abs(e.deltaX) && Math.abs(e.deltaY) > 0;\n    // const xPan = Math.abs(e.deltaY) < Math.abs(e.deltaX) && Math.abs(e.deltaX) > 0;\n    const mouseXY = mousePosition(e);\n    e.preventDefault();\n\n    if (zoom && this.focus && yZoom && !panInProgress) {\n      const zoomDir = e.deltaY > 0 ? 1 : -1;\n\n      onZoom(zoomDir, mouseXY, e);\n    } else if (this.focus) {\n      if (this.shouldPan()) {\n        // console.log(\"Do pan now...\")\n        // pan already in progress\n        const { panStartXScale, chartsToPan } = this.state.panStart;\n        this.lastNewPos = mouseXY;\n        this.panHappened = true;\n\n        this.dx += e.deltaX;\n        this.dy += e.deltaY;\n        const dxdy = { dx: this.dx, dy: this.dy };\n\n        this.props.onPan(mouseXY, panStartXScale, dxdy, chartsToPan, e);\n      } else {\n        // console.log(\"Pan start...\")\n        // pan start\n\n        const { xScale, chartConfig } = this.props;\n        const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n\n        this.dx = 0;\n        this.dy = 0;\n        this.setState({\n          panInProgress: true,\n          panStart: {\n            panStartXScale: xScale,\n            panOrigin: mouseXY,\n            chartsToPan: currentCharts,\n          },\n        });\n      }\n      this.queuePanEnd();\n    }\n  }\n  queuePanEnd() {\n    if (isDefined(this.panEndTimeout)) {\n      clearTimeout(this.panEndTimeout);\n    }\n    this.panEndTimeout = setTimeout(() => {\n      this.handlePanEnd();\n    }, 100);\n  }\n  handleMouseMove() {\n    const e = d3Event;\n\n    const { onMouseMove, mouseMove } = this.props;\n\n    if (this.mouseInteraction && mouseMove && !this.state.panInProgress) {\n      const newPos = mouse(this.node);\n\n      onMouseMove(newPos, 'mouse', e);\n    }\n  }\n  handleClick(e) {\n    const mouseXY = mousePosition(e);\n    const { onClick, onDoubleClick } = this.props;\n\n    if (!this.panHappened && !this.dragHappened) {\n      if (this.clicked) {\n        onDoubleClick(mouseXY, e);\n        this.clicked = false;\n      } else {\n        onClick(mouseXY, e);\n        this.clicked = true;\n        setTimeout(() => {\n          if (this.clicked) {\n            this.clicked = false;\n          }\n        }, 400);\n      }\n    }\n  }\n  handleRightClick(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    const { onContextMenu, onPanEnd } = this.props;\n\n    const mouseXY = mousePosition(e, this.node.getBoundingClientRect());\n\n    if (isDefined(this.state.panStart)) {\n      const { panStartXScale, panOrigin, chartsToPan } = this.state.panStart;\n      if (this.panHappened) {\n        onPanEnd(mouseXY, panStartXScale, panOrigin, chartsToPan, e);\n      }\n      const win = d3Window(this.node);\n      select(win).on(MOUSEMOVE, null).on(MOUSEUP, null);\n\n      this.setState({\n        panInProgress: false,\n        panStart: null,\n      });\n    }\n\n    onContextMenu(mouseXY, e);\n  }\n\n  handleDrag() {\n    const e = d3Event;\n    if (this.props.onDrag) {\n      this.dragHappened = true;\n      const mouseXY = mouse(this.node);\n      this.props.onDrag(\n        {\n          startPos: this.state.dragStartPosition,\n          mouseXY,\n        },\n        e\n      );\n    }\n  }\n  cancelDrag() {\n    const win = d3Window(this.node);\n    select(win)\n      .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n      .on(MOUSEUP, null);\n\n    this.setState({\n      dragInProgress: false,\n    });\n    this.mouseInteraction = true;\n  }\n  handleDragEnd() {\n    const e = d3Event;\n    const mouseXY = mouse(this.node);\n\n    const win = d3Window(this.node);\n    select(win)\n      .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n      .on(MOUSEUP, null);\n\n    if (this.dragHappened) {\n      this.props.onDragComplete(\n        {\n          mouseXY,\n        },\n        e\n      );\n    }\n\n    this.setState({\n      dragInProgress: false,\n    });\n    this.mouseInteraction = true;\n  }\n  canPan() {\n    const { getAllPanConditions } = this.props;\n    const { pan: initialPanEnabled } = this.props;\n\n    const { panEnabled, draggable: somethingSelected } =\n      getAllPanConditions().reduce(\n        (returnObj, a) => {\n          return {\n            draggable: returnObj.draggable || a.draggable,\n            panEnabled: returnObj.panEnabled && a.panEnabled,\n          };\n        },\n        {\n          draggable: false,\n          panEnabled: initialPanEnabled,\n        }\n      );\n\n    return {\n      panEnabled,\n      somethingSelected,\n    };\n  }\n  handleMouseDown(e) {\n    if (e.button !== 0) {\n      return;\n    }\n    const { xScale, chartConfig, onMouseDown } = this.props;\n\n    this.panHappened = false;\n    this.dragHappened = false;\n    this.focus = true;\n\n    if (!this.state.panInProgress && this.mouseInteraction) {\n      const mouseXY = mousePosition(e);\n      const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n      const { panEnabled, somethingSelected } = this.canPan();\n      const pan = panEnabled && !somethingSelected;\n\n      if (pan) {\n        this.setState({\n          panInProgress: pan,\n          panStart: {\n            panStartXScale: xScale,\n            panOrigin: mouseXY,\n            chartsToPan: currentCharts,\n          },\n        });\n\n        const win = d3Window(this.node);\n        select(win)\n          .on(MOUSEMOVE, this.handlePan)\n          .on(MOUSEUP, this.handlePanEnd);\n      } else if (somethingSelected) {\n        this.setState({\n          panInProgress: false,\n          dragInProgress: true,\n          panStart: null,\n          dragStartPosition: mouseXY,\n        });\n        this.props.onDragStart({ startPos: mouseXY }, e);\n        // this.mouseInteraction = false;\n\n        const win = d3Window(this.node);\n        select(win)\n          .on(MOUSEMOVE, this.handleDrag)\n          .on(MOUSEUP, this.handleDragEnd);\n      }\n\n      onMouseDown(mouseXY, currentCharts, e);\n    }\n    e.preventDefault();\n  }\n  shouldPan() {\n    const { pan: panEnabled, onPan } = this.props;\n    return panEnabled && onPan && isDefined(this.state.panStart);\n  }\n  handlePan() {\n    const e = d3Event;\n\n    if (this.shouldPan()) {\n      this.panHappened = true;\n\n      const { panStartXScale, panOrigin, chartsToPan } = this.state.panStart;\n\n      const mouseXY = this.mouseInteraction\n        ? mouse(this.node)\n        : touches(this.node)[0];\n\n      this.lastNewPos = mouseXY;\n      const dx = mouseXY[0] - panOrigin[0];\n      const dy = mouseXY[1] - panOrigin[1];\n\n      this.dx = dx;\n      this.dy = dy;\n\n      this.props.onPan(mouseXY, panStartXScale, { dx, dy }, chartsToPan, e);\n    }\n  }\n  handlePanEnd() {\n    const e = d3Event;\n    const { pan: panEnabled, onPanEnd } = this.props;\n\n    if (isDefined(this.state.panStart)) {\n      const { panStartXScale, chartsToPan } = this.state.panStart;\n\n      const win = d3Window(this.node);\n      select(win)\n        .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n        .on(MOUSEUP, null)\n        .on(TOUCHMOVE, null)\n        .on(TOUCHEND, null);\n\n      if (\n        this.panHappened &&\n        // && !this.contextMenuClicked\n        panEnabled &&\n        onPanEnd\n      ) {\n        const { dx, dy } = this;\n\n        // console.log(dx, dy)\n        delete this.dx;\n        delete this.dy;\n        onPanEnd(this.lastNewPos, panStartXScale, { dx, dy }, chartsToPan, e);\n      }\n\n      this.setState({\n        panInProgress: false,\n        panStart: null,\n      });\n    }\n  }\n  handleTouchMove(e) {\n    const { onMouseMove } = this.props;\n    const touchXY = touchPosition(getTouchProps(e.touches[0]), e);\n    onMouseMove(touchXY, 'touch', e);\n  }\n  handleTouchStart(e) {\n    this.mouseInteraction = false;\n\n    const { pan: panEnabled, chartConfig, onMouseMove } = this.props;\n    const { xScale, onPanEnd } = this.props;\n\n    if (e.touches.length === 1) {\n      this.panHappened = false;\n      const touchXY = touchPosition(getTouchProps(e.touches[0]), e);\n      onMouseMove(touchXY, 'touch', e);\n\n      if (panEnabled) {\n        const currentCharts = getCurrentCharts(chartConfig, touchXY);\n\n        this.setState({\n          panInProgress: true,\n          panStart: {\n            panStartXScale: xScale,\n            panOrigin: touchXY,\n            chartsToPan: currentCharts,\n          },\n        });\n\n        const win = d3Window(this.node);\n        select(win)\n          .on(TOUCHMOVE, this.handlePan, false)\n          .on(TOUCHEND, this.handlePanEnd, false);\n      }\n    } else if (e.touches.length === 2) {\n      // pinch zoom begin\n      // do nothing pinch zoom is handled in handleTouchMove\n      const { panInProgress, panStart } = this.state;\n\n      if (panInProgress && panEnabled && onPanEnd) {\n        const { panStartXScale, panOrigin, chartsToPan } = panStart;\n\n        const win = d3Window(this.node);\n        select(win)\n          .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n          .on(MOUSEUP, null)\n          .on(TOUCHMOVE, this.handlePinchZoom, false)\n          .on(TOUCHEND, this.handlePinchZoomEnd, false);\n\n        const touch1Pos = touchPosition(getTouchProps(e.touches[0]), e);\n        const touch2Pos = touchPosition(getTouchProps(e.touches[1]), e);\n\n        if (\n          this.panHappened &&\n          // && !this.contextMenuClicked\n          panEnabled &&\n          onPanEnd\n        ) {\n          onPanEnd(this.lastNewPos, panStartXScale, panOrigin, chartsToPan, e);\n        }\n\n        this.setState({\n          panInProgress: false,\n          pinchZoomStart: {\n            xScale,\n            touch1Pos,\n            touch2Pos,\n            range: xScale.range(),\n            chartsToPan,\n          },\n        });\n      }\n    }\n  }\n  handlePinchZoom() {\n    const e = d3Event;\n    const [touch1Pos, touch2Pos] = touches(this.node);\n    const { xScale, zoom: zoomEnabled, onPinchZoom } = this.props;\n\n    // eslint-disable-next-line no-unused-vars\n    const { chartsToPan, ...initialPinch } = this.state.pinchZoomStart;\n\n    if (zoomEnabled && onPinchZoom) {\n      onPinchZoom(\n        initialPinch,\n        {\n          touch1Pos,\n          touch2Pos,\n          xScale,\n        },\n        e\n      );\n    }\n  }\n  handlePinchZoomEnd() {\n    const e = d3Event;\n\n    const win = d3Window(this.node);\n    select(win).on(TOUCHMOVE, null).on(TOUCHEND, null);\n\n    const { zoom: zoomEnabled, onPinchZoomEnd } = this.props;\n\n    // eslint-disable-next-line no-unused-vars\n    const { chartsToPan, ...initialPinch } = this.state.pinchZoomStart;\n\n    if (zoomEnabled && onPinchZoomEnd) {\n      onPinchZoomEnd(initialPinch, e);\n    }\n\n    this.setState({\n      pinchZoomStart: null,\n    });\n  }\n  setCursorClass(cursorOverrideClass) {\n    if (cursorOverrideClass !== this.state.cursorOverrideClass) {\n      this.setState({\n        cursorOverrideClass,\n      });\n    }\n  }\n  render() {\n    const { height, width, disableInteraction, useCrossHairStyleCursor } =\n      this.props;\n    const className =\n      this.state.cursorOverrideClass != null\n        ? this.state.cursorOverrideClass\n        : !useCrossHairStyleCursor\n        ? ''\n        : this.state.panInProgress\n        ? 'react-stockcharts-grabbing-cursor'\n        : 'react-stockcharts-crosshair-cursor';\n\n    const interactionProps = disableInteraction || {\n      onMouseDown: this.handleMouseDown,\n      onClick: this.handleClick,\n      onContextMenu: this.handleRightClick,\n      onTouchStart: this.handleTouchStart,\n      onTouchMove: this.handleTouchMove,\n    };\n\n    return (\n      <rect\n        ref={this.saveNode}\n        className={className}\n        width={width}\n        height={height}\n        style={{ opacity: 0 }}\n        {...interactionProps}\n      />\n    );\n  }\n}\n\n// \t\t\t\tonMouseEnter={this.handleEnter}\n//\t\t\t\tonMouseLeave={this.handleLeave}\n\nEventCapture.propTypes = {\n  mouseMove: PropTypes.bool.isRequired,\n  zoom: PropTypes.bool.isRequired,\n  pan: PropTypes.bool.isRequired,\n  panSpeedMultiplier: PropTypes.number.isRequired,\n  focus: PropTypes.bool.isRequired,\n  useCrossHairStyleCursor: PropTypes.bool.isRequired,\n\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  chartConfig: PropTypes.array,\n  xScale: PropTypes.func.isRequired,\n  xAccessor: PropTypes.func.isRequired,\n  disableInteraction: PropTypes.bool.isRequired,\n\n  getAllPanConditions: PropTypes.func.isRequired,\n\n  onMouseMove: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onZoom: PropTypes.func,\n  onPinchZoom: PropTypes.func,\n  onPinchZoomEnd: PropTypes.func.isRequired,\n  onPan: PropTypes.func,\n  onPanEnd: PropTypes.func,\n  onDragStart: PropTypes.func,\n  onDrag: PropTypes.func,\n  onDragComplete: PropTypes.func,\n\n  onClick: PropTypes.func,\n  onDoubleClick: PropTypes.func,\n  onContextMenu: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  children: PropTypes.node,\n};\n\nEventCapture.defaultProps = {\n  mouseMove: false,\n  zoom: false,\n  pan: false,\n  panSpeedMultiplier: 1,\n  focus: false,\n  onDragComplete: noop,\n  disableInteraction: false,\n};\n\nexport default EventCapture;\n"]}