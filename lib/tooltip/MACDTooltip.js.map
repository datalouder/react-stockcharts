{"version":3,"sources":["../../../src/lib/tooltip/MACDTooltip.js"],"names":["MACDTooltip","props","renderSVG","bind","moreProps","onClick","fontFamily","fontSize","displayFormat","className","yAccessor","options","appearance","labelFill","displayValuesFor","chartConfig","width","height","currentItem","macdValue","macd","signal","divergence","originProp","origin","x","y","stroke","slow","fast","fill","Component","propTypes","PropTypes","oneOfType","array","func","isRequired","string","number","shape","defaultProps"],"mappings":"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","file":"MACDTooltip.js","sourcesContent":["import { format } from 'd3-format';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport displayValuesFor from './displayValuesFor';\nimport GenericChartComponent from '../GenericChartComponent';\n\nimport ToolTipText from './ToolTipText';\nimport ToolTipTSpanLabel from './ToolTipTSpanLabel';\nimport { functor } from '../utils';\n\nclass MACDTooltip extends Component {\n  constructor(props) {\n    super(props);\n    this.renderSVG = this.renderSVG.bind(this);\n  }\n  renderSVG(moreProps) {\n    const { onClick, fontFamily, fontSize, displayFormat, className } =\n      this.props;\n    const { yAccessor, options, appearance, labelFill } = this.props;\n    const { displayValuesFor } = this.props;\n\n    const {\n      chartConfig: { width, height },\n    } = moreProps;\n\n    const currentItem = displayValuesFor(this.props, moreProps);\n    const macdValue = currentItem && yAccessor(currentItem);\n\n    const macd =\n      (macdValue && macdValue.macd && displayFormat(macdValue.macd)) || 'n/a';\n    const signal =\n      (macdValue && macdValue.signal && displayFormat(macdValue.signal)) ||\n      'n/a';\n    const divergence =\n      (macdValue &&\n        macdValue.divergence &&\n        displayFormat(macdValue.divergence)) ||\n      'n/a';\n\n    const { origin: originProp } = this.props;\n    const origin = functor(originProp);\n    const [x, y] = origin(width, height);\n\n    return (\n      <g\n        className={className}\n        transform={`translate(${x}, ${y})`}\n        onClick={onClick}\n      >\n        <ToolTipText x={0} y={0} fontFamily={fontFamily} fontSize={fontSize}>\n          <ToolTipTSpanLabel fill={labelFill}>MACD (</ToolTipTSpanLabel>\n          <tspan fill={appearance.stroke.macd}>{options.slow}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}>, </ToolTipTSpanLabel>\n          <tspan fill={appearance.stroke.macd}>{options.fast}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}>): </ToolTipTSpanLabel>\n          <tspan fill={appearance.stroke.macd}>{macd}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}> Signal (</ToolTipTSpanLabel>\n          <tspan fill={appearance.stroke.signal}>{options.signal}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}>): </ToolTipTSpanLabel>\n          <tspan fill={appearance.stroke.signal}>{signal}</tspan>\n          <ToolTipTSpanLabel fill={labelFill}> Divergence: </ToolTipTSpanLabel>\n          <tspan fill={appearance.fill.divergence}>{divergence}</tspan>\n        </ToolTipText>\n      </g>\n    );\n  }\n  render() {\n    return (\n      <GenericChartComponent\n        clip={false}\n        svgDraw={this.renderSVG}\n        drawOn={['mousemove']}\n      />\n    );\n  }\n}\n\nMACDTooltip.propTypes = {\n  origin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]).isRequired,\n  className: PropTypes.string,\n  fontFamily: PropTypes.string,\n  fontSize: PropTypes.number,\n  labelFill: PropTypes.string,\n\n  yAccessor: PropTypes.func.isRequired,\n  options: PropTypes.shape({\n    slow: PropTypes.number.isRequired,\n    fast: PropTypes.number.isRequired,\n    signal: PropTypes.number.isRequired,\n  }).isRequired,\n  appearance: PropTypes.shape({\n    stroke: {\n      macd: PropTypes.string.isRequired,\n      signal: PropTypes.string.isRequired,\n    }.isRequired,\n    fill: PropTypes.shape({\n      divergence: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  displayFormat: PropTypes.func.isRequired,\n  displayValuesFor: PropTypes.func,\n  onClick: PropTypes.func,\n};\n\nMACDTooltip.defaultProps = {\n  origin: [0, 0],\n  displayFormat: format('.2f'),\n  displayValuesFor: displayValuesFor,\n  className: 'react-stockcharts-tooltip',\n};\n\nexport default MACDTooltip;\n// export default MACDTooltip;\n"]}