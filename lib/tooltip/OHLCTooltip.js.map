{"version":3,"sources":["../../../src/lib/tooltip/OHLCTooltip.js"],"names":["OHLCTooltip","props","renderSVG","bind","moreProps","displayValuesFor","xDisplayFormat","accessor","volumeFormat","ohlcFormat","percentFormat","displayTexts","chartConfig","width","height","displayXAccessor","currentItem","displayDate","open","high","low","close","volume","percent","na","item","originProp","origin","x","y","itemsToDisplay","children","Component","propTypes","className","PropTypes","string","func","oneOfType","array","fontFamily","fontSize","number","onClick","textFill","labelFill","object","displayTextsDefault","d","o","h","l","c","v","defaultProps","date","defaultDisplay"],"mappings":"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","file":"OHLCTooltip.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { format } from 'd3-format';\nimport { timeFormat } from 'd3-time-format';\nimport displayValuesFor from './displayValuesFor';\nimport GenericChartComponent from '../GenericChartComponent';\n\nimport { isDefined, functor } from '../utils';\nimport ToolTipText from './ToolTipText';\nimport ToolTipTSpanLabel from './ToolTipTSpanLabel';\n\nclass OHLCTooltip extends Component {\n  constructor(props) {\n    super(props);\n    this.renderSVG = this.renderSVG.bind(this);\n  }\n  renderSVG(moreProps) {\n    const { displayValuesFor } = this.props;\n    const {\n      xDisplayFormat,\n      accessor,\n      volumeFormat,\n      ohlcFormat,\n      percentFormat,\n      displayTexts,\n    } = this.props;\n\n    const {\n      chartConfig: { width, height },\n    } = moreProps;\n    const { displayXAccessor } = moreProps;\n\n    const currentItem = displayValuesFor(this.props, moreProps);\n\n    let displayDate, open, high, low, close, volume, percent;\n    displayDate =\n      open =\n      high =\n      low =\n      close =\n      volume =\n      percent =\n        displayTexts.na;\n\n    if (isDefined(currentItem) && isDefined(accessor(currentItem))) {\n      const item = accessor(currentItem);\n      volume = isDefined(item.volume)\n        ? volumeFormat(item.volume)\n        : displayTexts.na;\n\n      displayDate = xDisplayFormat(displayXAccessor(item));\n      open = ohlcFormat(item.open);\n      high = ohlcFormat(item.high);\n      low = ohlcFormat(item.low);\n      close = ohlcFormat(item.close);\n      percent = percentFormat((item.close - item.open) / item.open);\n    }\n\n    const { origin: originProp } = this.props;\n    const origin = functor(originProp);\n    const [x, y] = origin(width, height);\n\n    const itemsToDisplay = {\n      displayDate,\n      open,\n      high,\n      low,\n      close,\n      percent,\n      volume,\n      x,\n      y,\n    };\n    return this.props.children(this.props, moreProps, itemsToDisplay);\n  }\n  render() {\n    return (\n      <GenericChartComponent\n        clip={false}\n        svgDraw={this.renderSVG}\n        drawOn={['mousemove']}\n      />\n    );\n  }\n}\n\nOHLCTooltip.propTypes = {\n  className: PropTypes.string,\n  accessor: PropTypes.func,\n  xDisplayFormat: PropTypes.func,\n  children: PropTypes.func,\n  volumeFormat: PropTypes.func,\n  percentFormat: PropTypes.func,\n  ohlcFormat: PropTypes.func,\n  origin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n  fontFamily: PropTypes.string,\n  fontSize: PropTypes.number,\n  onClick: PropTypes.func,\n  displayValuesFor: PropTypes.func,\n  textFill: PropTypes.string,\n  labelFill: PropTypes.string,\n  displayTexts: PropTypes.object,\n};\n\nconst displayTextsDefault = {\n  d: 'Date: ',\n  o: ' O: ',\n  h: ' H: ',\n  l: ' L: ',\n  c: ' C: ',\n  v: ' Vol: ',\n  na: 'n/a',\n};\n\nOHLCTooltip.defaultProps = {\n  accessor: d => {\n    return {\n      date: d.date,\n      open: d.open,\n      high: d.high,\n      low: d.low,\n      close: d.close,\n      volume: d.volume,\n    };\n  },\n  xDisplayFormat: timeFormat('%Y-%m-%d'),\n  volumeFormat: format('.4s'),\n  percentFormat: format('.2%'),\n  ohlcFormat: format('.2f'),\n  displayValuesFor: displayValuesFor,\n  origin: [0, 0],\n  children: defaultDisplay,\n  displayTexts: displayTextsDefault,\n};\n\nfunction defaultDisplay(props, moreProps, itemsToDisplay) {\n  /* eslint-disable */\n  const {\n    className,\n    textFill,\n    labelFill,\n    onClick,\n    fontFamily,\n    fontSize,\n    displayTexts,\n  } = props;\n  /* eslint-enable */\n\n  const { displayDate, open, high, low, close, volume, x, y } = itemsToDisplay;\n  return (\n    <g\n      className={`react-stockcharts-tooltip-hover ${className}`}\n      transform={`translate(${x}, ${y})`}\n      onClick={onClick}\n    >\n      <ToolTipText x={0} y={0} fontFamily={fontFamily} fontSize={fontSize}>\n        <ToolTipTSpanLabel fill={labelFill} key=\"label\" x={0} dy=\"5\">\n          {displayTexts.d}\n        </ToolTipTSpanLabel>\n        <tspan key=\"value\" fill={textFill}>\n          {displayDate}\n        </tspan>\n        <ToolTipTSpanLabel fill={labelFill} key=\"label_O\">\n          {displayTexts.o}\n        </ToolTipTSpanLabel>\n        <tspan key=\"value_O\" fill={textFill}>\n          {open}\n        </tspan>\n        <ToolTipTSpanLabel fill={labelFill} key=\"label_H\">\n          {displayTexts.h}\n        </ToolTipTSpanLabel>\n        <tspan key=\"value_H\" fill={textFill}>\n          {high}\n        </tspan>\n        <ToolTipTSpanLabel fill={labelFill} key=\"label_L\">\n          {displayTexts.l}\n        </ToolTipTSpanLabel>\n        <tspan key=\"value_L\" fill={textFill}>\n          {low}\n        </tspan>\n        <ToolTipTSpanLabel fill={labelFill} key=\"label_C\">\n          {displayTexts.c}\n        </ToolTipTSpanLabel>\n        <tspan key=\"value_C\" fill={textFill}>\n          {close}\n        </tspan>\n        <ToolTipTSpanLabel fill={labelFill} key=\"label_Vol\">\n          {displayTexts.v}\n        </ToolTipTSpanLabel>\n        <tspan key=\"value_Vol\" fill={textFill}>\n          {volume}\n        </tspan>\n      </ToolTipText>\n    </g>\n  );\n}\n\nexport default OHLCTooltip;\n"]}