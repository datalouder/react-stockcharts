{"version":3,"sources":["../../../src/lib/coordinates/CurrentCoordinate.js"],"names":["CurrentCoordinate","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","circle","helper","fillStyle","fill","beginPath","arc","x","y","r","Math","PI","className","fillColor","Function","currentItem","getMouseCanvas","Component","propTypes","yAccessor","PropTypes","func","number","isRequired","string","defaultProps","show","xScale","yScale","chartConfig","xAccessor","xValue","yValue","round"],"mappings":"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","file":"CurrentCoordinate.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport GenericChartComponent from '../GenericChartComponent';\nimport { isNotDefined } from '../utils';\nimport { getMouseCanvas } from '../GenericComponent';\n\nclass CurrentCoordinate extends Component {\n  constructor(props) {\n    super(props);\n    this.renderSVG = this.renderSVG.bind(this);\n    this.drawOnCanvas = this.drawOnCanvas.bind(this);\n  }\n  drawOnCanvas(ctx, moreProps) {\n    const circle = helper(this.props, moreProps);\n    if (!circle) return null;\n\n    ctx.fillStyle = circle.fill;\n    ctx.beginPath();\n    ctx.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI, false);\n    ctx.fill();\n  }\n  renderSVG(moreProps) {\n    const { className } = this.props;\n\n    const circle = helper(this.props, moreProps);\n    if (!circle) return null;\n\n    const fillColor =\n      circle.fill instanceof Function\n        ? circle.fill(moreProps.currentItem)\n        : circle.fill;\n\n    return (\n      <circle\n        className={className}\n        cx={circle.x}\n        cy={circle.y}\n        r={circle.r}\n        fill={fillColor}\n      />\n    );\n  }\n  render() {\n    return (\n      <GenericChartComponent\n        svgDraw={this.renderSVG}\n        canvasDraw={this.drawOnCanvas}\n        canvasToDraw={getMouseCanvas}\n        drawOn={['mousemove', 'pan']}\n      />\n    );\n  }\n}\n\nCurrentCoordinate.propTypes = {\n  yAccessor: PropTypes.func,\n  r: PropTypes.number.isRequired,\n  className: PropTypes.string,\n};\n\nCurrentCoordinate.defaultProps = {\n  r: 3,\n  className: 'react-stockcharts-current-coordinate',\n};\n\nfunction helper(props, moreProps) {\n  const { fill, yAccessor, r } = props;\n\n  const {\n    show,\n    xScale,\n    chartConfig: { yScale },\n    currentItem,\n    xAccessor,\n  } = moreProps;\n\n  // console.log(show);\n  if (!show || isNotDefined(currentItem)) return null;\n\n  const xValue = xAccessor(currentItem);\n  const yValue = yAccessor(currentItem);\n\n  if (isNotDefined(yValue)) return null;\n\n  // console.log(chartConfig);\n  const x = Math.round(xScale(xValue));\n  const y = Math.round(yScale(yValue));\n\n  return { x, y, r, fill };\n}\n\nexport default CurrentCoordinate;\n"]}