{"version":3,"sources":["../../../src/lib/indicator/bollingerBand.js"],"names":["base","type","ALGORITHM_TYPE","underlyingAlgorithm","mergedAlgorithm","algorithm","merge","datum","indicator","bollingerBand","data","options","accessor","Error"],"mappings":";;;;;;kBAOe,YAAY;AACzB,MAAMA,OAAO,+BAAgBC,IAAhB,CAAqBC,cAArB,CAAb;;AAEA,MAAMC,sBAAsB,gCAA5B;;AAEA,MAAMC,kBAAkB,oBACrBC,SADqB,CACXF,mBADW,EAErBG,KAFqB,CAEf,UAACC,KAAD,EAAQC,SAAR,EAAsB;AAC3BD,UAAME,aAAN,GAAsBD,SAAtB;AACD,GAJqB,CAAxB;;AAMA,MAAMA,YAAY,SAAZA,SAAY,CAAUE,IAAV,EAA2C;AAAA,QAA3BC,OAA2B,uEAAjB,EAAEL,OAAO,IAAT,EAAiB;;AAC3D,QAAIK,QAAQL,KAAZ,EAAmB;AACjB,UAAI,CAACN,KAAKY,QAAL,EAAL,EACE,MAAM,IAAIC,KAAJ,yBACkBX,cADlB,yBAAN;AAGF,aAAOE,gBAAgBM,IAAhB,CAAP;AACD;AACD,WAAOP,oBAAoBO,IAApB,CAAP;AACD,GATD;;AAWA,qBAAOF,SAAP,EAAkBR,IAAlB,EAAwB,IAAxB,EAA8B,UAA9B,EAA0C,QAA1C,EAAoD,MAApD,EAA4D,MAA5D,EAAoE,MAApE;AACA,qBAAOQ,SAAP,EAAkBL,mBAAlB,EAAuC,SAAvC;AACA,qBAAOK,SAAP,EAAkBJ,eAAlB,EAAmC,OAAnC,EAA4C,eAA5C;;AAEA,SAAOI,SAAP;AACD,C;;AAlCD;;AAEA;;;;AACA;;;;AAEA,IAAMN,iBAAiB,eAAvB","file":"bollingerBand.js","sourcesContent":["import { rebind, merge } from '../utils';\n\nimport baseIndicator from './baseIndicator';\nimport { bollingerband } from '../calculator';\n\nconst ALGORITHM_TYPE = 'BollingerBand';\n\nexport default function () {\n  const base = baseIndicator().type(ALGORITHM_TYPE);\n\n  const underlyingAlgorithm = bollingerband();\n\n  const mergedAlgorithm = merge()\n    .algorithm(underlyingAlgorithm)\n    .merge((datum, indicator) => {\n      datum.bollingerBand = indicator;\n    });\n\n  const indicator = function (data, options = { merge: true }) {\n    if (options.merge) {\n      if (!base.accessor())\n        throw new Error(\n          `Set an accessor to ${ALGORITHM_TYPE} before calculating`\n        );\n      return mergedAlgorithm(data);\n    }\n    return underlyingAlgorithm(data);\n  };\n\n  rebind(indicator, base, 'id', 'accessor', 'stroke', 'fill', 'echo', 'type');\n  rebind(indicator, underlyingAlgorithm, 'options');\n  rebind(indicator, mergedAlgorithm, 'merge', 'skipUndefined');\n\n  return indicator;\n}\n"]}