{"version":3,"sources":["../../../src/lib/calculator/smoothedForceIndex.js"],"names":["underlyingAlgorithm","merge","combine","force","smoothed","options","defaultOptions","calculator","data","smoothingType","smoothingWindow","sourcePath","volumePath","algo","ma","forceMA","windowSize","undefined","undefinedLength","x","arguments","length"],"mappings":";;;;;;;;kBAMe,YAAY;AACzB,MAAMA,sBAAsB,2BAA5B;AACA,MAAMC,QAAQ,qBAASC,OAAT,CAAiB,UAACC,KAAD,EAAQC,QAAR,EAAqB;AAClD,WAAO,EAAED,YAAF,EAASC,kBAAT,EAAP;AACD,GAFa,CAAd;;AAIA,MAAIC,UAAUC,gDAAd;AACA,WAASC,UAAT,CAAoBC,IAApB,EAA0B;AAAA,mBACmBH,OADnB;AAAA,QAChBI,aADgB,YAChBA,aADgB;AAAA,QACDC,eADC,YACDA,eADC;AAAA,oBAEWL,OAFX;AAAA,QAEhBM,UAFgB,aAEhBA,UAFgB;AAAA,QAEJC,UAFI,aAEJA,UAFI;;;AAIxB,QAAMC,OAAOb,oBAAoBK,OAApB,CAA4B,EAAEM,sBAAF,EAAcC,sBAAd,EAA5B,CAAb;;AAEA,QAAMT,QAAQU,KAAKL,IAAL,CAAd;;AAEA,QAAMM,KAAKL,kBAAkB,KAAlB,GAA0B,oBAA1B,GAAkC,oBAA7C;AACA,QAAMM,UAAUD,GAAGT,OAAH,CAAW;AACzBW,kBAAYN,eADa;AAEzBC,kBAAYM;AAFa,KAAX,CAAhB;;AAKA,QAAMb,WAAWW,QAAQZ,KAAR,CAAjB;AACA,WAAOF,MAAME,KAAN,EAAaC,QAAb,CAAP;AACD;;AAEDG,aAAWW,eAAX,GAA6B,YAAY;AAAA,oBACXb,OADW;AAAA,QAC/BK,eAD+B,aAC/BA,eAD+B;;AAEvC,WAAOV,oBAAoBkB,eAApB,KAAwCR,eAAxC,GAA0D,CAAjE;AACD,GAHD;AAIAH,aAAWF,OAAX,GAAqB,UAAUc,CAAV,EAAa;AAChC,QAAI,CAACC,UAAUC,MAAf,EAAuB;AACrB,aAAOhB,OAAP;AACD;AACDA,2BAAeC,gDAAf,EAAkCa,CAAlC;AACA,WAAOZ,UAAP;AACD,GAND;;AAQA,SAAOA,UAAP;AACD,C;;AA5CD;;;;AACA;;;;AACA;;;;AACA;;AACA","file":"smoothedForceIndex.js","sourcesContent":["import forceIndex from './forceIndex';\nimport ema from './ema';\nimport sma from './sma';\nimport { zipper } from '../utils';\nimport { SmoothedForceIndex as defaultOptions } from './defaultOptionsForComputation';\n\nexport default function () {\n  const underlyingAlgorithm = forceIndex();\n  const merge = zipper().combine((force, smoothed) => {\n    return { force, smoothed };\n  });\n\n  let options = defaultOptions;\n  function calculator(data) {\n    const { smoothingType, smoothingWindow } = options;\n    const { sourcePath, volumePath } = options;\n\n    const algo = underlyingAlgorithm.options({ sourcePath, volumePath });\n\n    const force = algo(data);\n\n    const ma = smoothingType === 'ema' ? ema() : sma();\n    const forceMA = ma.options({\n      windowSize: smoothingWindow,\n      sourcePath: undefined,\n    });\n\n    const smoothed = forceMA(force);\n    return merge(force, smoothed);\n  }\n\n  calculator.undefinedLength = function () {\n    const { smoothingWindow } = options;\n    return underlyingAlgorithm.undefinedLength() + smoothingWindow - 1;\n  };\n  calculator.options = function (x) {\n    if (!arguments.length) {\n      return options;\n    }\n    options = { ...defaultOptions, ...x };\n    return calculator;\n  };\n\n  return calculator;\n}\n"]}