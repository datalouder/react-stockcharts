{"version":3,"sources":["../../src/lib/ChartCanvas.js"],"names":["log","CANDIDATES_FOR_RESET","shouldResetChart","thisProps","nextProps","every","result","key","getCursorStyle","tooltipStyle","getDimensions","props","height","margin","top","bottom","width","left","right","getXScaleDirection","flipXScale","calculateFullData","fullData","data","plotFull","xScale","clamp","pointsPerPxThreshold","xAccessor","displayXAccessor","minPointsPerPxThreshold","useWholeData","identity","filterData","copy","resetChart","firstCalculation","process","env","NODE_ENV","state","calculateState","initialPlotData","plotData","postCalculator","children","dimensions","chartConfig","domain","updateChart","newState","initialXScale","lastItemWasVisible","initialChartConfig","lastItem","start","end","padding","maintainPointsPerPixelOnResize","direction","updatedXScale","setXRange","range","rangeStart","rangeEnd","newRangeStart","newRangeEnd","newDomainExtent","newStart","lastItemX","response","fallbackStart","fallbackEnd","dx","map","x","invert","newEnd","inputXAccesor","xExtentsProp","xExtents","i","length","prev","curr","Error","extent","d","each","rangeRoundPoints","isNaN","pinchCoordinates","pinch","touch1Pos","touch2Pos","topLeft","Math","min","bottomRight","max","ChartCanvas","getDataInfo","bind","getCanvasContexts","handleMouseMove","handleMouseEnter","handleMouseLeave","handleZoom","handlePinchZoom","handlePinchZoomEnd","handlePan","handlePanEnd","handleClick","handleMouseDown","handleDoubleClick","handleContextMenu","handleDragStart","handleDrag","handleDragEnd","panHelper","pinchZoomHelper","xAxisZoom","yAxisZoom","resetYDomain","calculateStateForDomain","generateSubscriptionId","draw","redraw","getAllPanConditions","subscriptions","subscribe","unsubscribe","amIOnTop","saveEventCaptureNode","saveCanvasContainerNode","setCursorClass","getMutableState","interactiveState","panInProgress","mutableState","lastSubscriptionId","node","eventCaptureNode","canvasContainerNode","canvases","axes","mouseCoord","ratio","bg","id","rest","getPanConditions","draggable","panEnabled","concat","filter","className","dragableComponents","mouseXY","e","currentCharts","currentItem","triggerEvent","newDomain","currentPlotData","currentDomain","beforePlotData","updatedScale","initialPinch","finalPinch","initialPinchXScale","iTL","iBR","fTL","fBR","xDash","round","yDash","y","cancelDrag","waitingForPinchZoomAnimationFrame","requestAnimationFrame","clearBothCanvas","trigger","clearThreeCanvas","firstItem","onLoadMore","setState","onXScaleChange","zoomDirection","zoomMultiplier","zoomAnchor","item","cx","c","show","chartId","yScale","yPanEnabled","type","forEach","listener","force","chartsToPan","dy","hackyWayToStopPanBeyondBounds__plotData","hackyWayToStopPanBeyondBounds__domain","mousePosition","panStartXScale","dxdy","waitingForPanAnimationFrame","inputType","waitingForMouseMoveAnimationFrame","prevMouseXY","clearMouseCanvas","startPos","chartCanvasType","reset","interaction","isInteractionEnabled","prevLastItem","calculatedState","changed","newChartConfig","realYDomain","zIndex","defaultFocus","mouseMoveEvent","panEvent","zoomEvent","useCrossHairStyleCursor","onSelect","cursorStyle","cursor","position","idx","disableInteraction","Component","propTypes","PropTypes","number","isRequired","object","oneOf","array","func","oneOfType","string","seriesName","bool","shape","propName","console","warn","defaultProps","noop","mouseBasedZoomAnchor","childContextTypes","arrayOf","origin","yExtents","yExtentsProvider","mouseCoordinates","at","format","ohlcv","date","open","high","low","close","volume"],"mappings":"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","file":"ChartCanvas.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { extent as d3Extent, min, max } from 'd3-array';\n\nimport {\n  head,\n  last,\n  isDefined,\n  isNotDefined,\n  clearCanvas,\n  shallowEqual,\n  identity,\n  noop,\n  functor,\n  getLogger,\n} from './utils';\n\n/* eslint-disable no-unused-vars */\nimport {\n  mouseBasedZoomAnchor,\n  lastVisibleItemBasedZoomAnchor,\n  rightDomainBasedZoomAnchor,\n} from './utils/zoomBehavior';\n/* eslint-enable no-unused-vars */\n\nimport {\n  getNewChartConfig,\n  getChartConfigWithUpdatedYScales,\n  getCurrentCharts,\n  getCurrentItem,\n} from './utils/ChartDataUtil';\n\nimport EventCapture from './EventCapture';\n\nimport CanvasContainer from './CanvasContainer';\nimport evaluator from './scale/evaluator';\n\nconst log = getLogger('ChartCanvas');\n\nconst CANDIDATES_FOR_RESET = [\n  'seriesName',\n  /* \"data\",*/\n  /* \"xAccessor\",*/\n];\n\nfunction shouldResetChart(thisProps, nextProps) {\n  return !CANDIDATES_FOR_RESET.every(key => {\n    const result = shallowEqual(thisProps[key], nextProps[key]);\n    // console.log(key, result);\n    return result;\n  });\n}\n\nfunction getCursorStyle() {\n  const tooltipStyle = `\n\t.react-stockcharts-grabbing-cursor {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.react-stockcharts-crosshair-cursor {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t.react-stockcharts-tooltip-hover {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-avoid-interaction {\n\t\tpointer-events: none;\n\t}\n\t.react-stockcharts-enable-interaction {\n\t\tpointer-events: all;\n\t}\n\t.react-stockcharts-tooltip {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-default-cursor {\n\t\tcursor: default;\n\t}\n\t.react-stockcharts-move-cursor {\n\t\tcursor: move;\n\t}\n\t.react-stockcharts-pointer-cursor {\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-ns-resize-cursor {\n\t\tcursor: ns-resize;\n\t}\n\t.react-stockcharts-ew-resize-cursor {\n\t\tcursor: ew-resize;\n\t}`;\n  return <style type=\"text/css\">{tooltipStyle}</style>;\n}\n\nfunction getDimensions(props) {\n  return {\n    height: props.height - props.margin.top - props.margin.bottom,\n    width: props.width - props.margin.left - props.margin.right,\n  };\n}\n\nfunction getXScaleDirection(flipXScale) {\n  return flipXScale ? -1 : 1;\n}\n\nfunction calculateFullData(props) {\n  const {\n    data: fullData,\n    plotFull,\n    xScale,\n    clamp,\n    pointsPerPxThreshold,\n    flipXScale,\n  } = props;\n  const { xAccessor, displayXAccessor, minPointsPerPxThreshold } = props;\n\n  const useWholeData = isDefined(plotFull) ? plotFull : xAccessor === identity;\n\n  const { filterData } = evaluator({\n    xScale,\n    useWholeData,\n    clamp,\n    pointsPerPxThreshold,\n    minPointsPerPxThreshold,\n    flipXScale,\n  });\n\n  return {\n    xAccessor,\n    displayXAccessor: displayXAccessor || xAccessor,\n    xScale: xScale.copy(),\n    fullData,\n    filterData,\n  };\n}\nfunction resetChart(props, firstCalculation = false) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!firstCalculation) log('CHART RESET');\n  }\n\n  const state = calculateState(props);\n  const { xAccessor, displayXAccessor, fullData } = state;\n  const { plotData: initialPlotData, xScale } = state;\n  const { postCalculator, children } = props;\n\n  const plotData = postCalculator(initialPlotData);\n\n  const dimensions = getDimensions(props);\n  const chartConfig = getChartConfigWithUpdatedYScales(\n    getNewChartConfig(dimensions, children),\n    { plotData, xAccessor, displayXAccessor, fullData },\n    xScale.domain()\n  );\n\n  return {\n    ...state,\n    xScale,\n    plotData,\n    chartConfig,\n  };\n}\n\nfunction updateChart(\n  newState,\n  initialXScale,\n  props,\n  lastItemWasVisible,\n  initialChartConfig\n) {\n  const { fullData, xScale, xAccessor, displayXAccessor, filterData } =\n    newState;\n\n  const lastItem = last(fullData);\n  const [start, end] = initialXScale.domain();\n\n  if (process.env.NODE_ENV !== 'production') {\n    log('TRIVIAL CHANGE');\n  }\n\n  const { postCalculator, children, padding, flipXScale } = props;\n  const { maintainPointsPerPixelOnResize } = props;\n  const direction = getXScaleDirection(flipXScale);\n  const dimensions = getDimensions(props);\n\n  const updatedXScale = setXRange(xScale, dimensions, padding, direction);\n\n  // console.log(\"lastItemWasVisible =\", lastItemWasVisible, end, xAccessor(lastItem), end >= xAccessor(lastItem));\n  let initialPlotData;\n  if (!lastItemWasVisible || end >= xAccessor(lastItem)) {\n    // resize comes here...\n    // get plotData between [start, end] and do not change the domain\n    const [rangeStart, rangeEnd] = initialXScale.range();\n    const [newRangeStart, newRangeEnd] = updatedXScale.range();\n    const newDomainExtent =\n      ((newRangeEnd - newRangeStart) / (rangeEnd - rangeStart)) * (end - start);\n    const newStart = maintainPointsPerPixelOnResize\n      ? end - newDomainExtent\n      : start;\n\n    const lastItemX = initialXScale(xAccessor(lastItem));\n    // console.log(\"pointsPerPixel => \", newStart, start, end, updatedXScale(end));\n    const response = filterData(\n      fullData,\n      [newStart, end],\n      xAccessor,\n      updatedXScale,\n      { fallbackStart: start, fallbackEnd: { lastItem, lastItemX } }\n    );\n    initialPlotData = response.plotData;\n    updatedXScale.domain(response.domain);\n    // console.log(\"HERE!!!!!\", start, end);\n  } else if (lastItemWasVisible && end < xAccessor(lastItem)) {\n    // this is when a new item is added and last item was visible\n    // so slide over and show the new item also\n\n    // get plotData between [xAccessor(l) - (end - start), xAccessor(l)] and DO change the domain\n    const dx = initialXScale(xAccessor(lastItem)) - initialXScale.range()[1];\n    const [newStart, newEnd] = initialXScale\n      .range()\n      .map(x => x + dx)\n      .map(initialXScale.invert);\n\n    const response = filterData(\n      fullData,\n      [newStart, newEnd],\n      xAccessor,\n      updatedXScale\n    );\n    initialPlotData = response.plotData;\n    updatedXScale.domain(response.domain); // if last item was visible, then shift\n  }\n  // plotData = getDataOfLength(fullData, showingInterval, plotData.length)\n  const plotData = postCalculator(initialPlotData);\n  const chartConfig = getChartConfigWithUpdatedYScales(\n    getNewChartConfig(dimensions, children, initialChartConfig),\n    { plotData, xAccessor, displayXAccessor, fullData },\n    updatedXScale.domain()\n  );\n\n  return {\n    xScale: updatedXScale,\n    xAccessor,\n    chartConfig,\n    plotData,\n    fullData,\n    filterData,\n  };\n}\n\nfunction calculateState(props) {\n  const {\n    xAccessor: inputXAccesor,\n    xExtents: xExtentsProp,\n    data,\n    padding,\n    flipXScale,\n  } = props;\n\n  if (process.env.NODE_ENV !== 'production' && isDefined(props.xScale.invert)) {\n    for (let i = 1; i < data.length; i++) {\n      const prev = data[i - 1];\n      const curr = data[i];\n      if (inputXAccesor(prev) > inputXAccesor(curr)) {\n        throw new Error(\n          \"'data' is not sorted on 'xAccessor', send 'data' sorted in ascending order of 'xAccessor'\"\n        );\n      }\n    }\n  }\n\n  const direction = getXScaleDirection(flipXScale);\n  const dimensions = getDimensions(props);\n\n  const extent =\n    typeof xExtentsProp === 'function'\n      ? xExtentsProp(data)\n      : d3Extent(\n          xExtentsProp\n            .map(d => functor(d))\n            .map(each => each(data, inputXAccesor))\n        );\n\n  const { xAccessor, displayXAccessor, xScale, fullData, filterData } =\n    calculateFullData(props);\n  const updatedXScale = setXRange(xScale, dimensions, padding, direction);\n\n  const { plotData, domain } = filterData(\n    fullData,\n    extent,\n    inputXAccesor,\n    updatedXScale\n  );\n\n  if (process.env.NODE_ENV !== 'production' && plotData.length <= 1) {\n    throw new Error(\n      `Showing ${plotData.length} datapoints, review the 'xExtents' prop of ChartCanvas`\n    );\n  }\n  return {\n    plotData,\n    xScale: updatedXScale.domain(domain),\n    xAccessor,\n    displayXAccessor,\n    fullData,\n    filterData,\n  };\n}\n\nfunction setXRange(xScale, dimensions, padding, direction = 1) {\n  if (xScale.rangeRoundPoints) {\n    if (isNaN(padding))\n      throw new Error('padding has to be a number for ordinal scale');\n    xScale.rangeRoundPoints([0, dimensions.width], padding);\n  } else if (xScale.padding) {\n    if (isNaN(padding))\n      throw new Error('padding has to be a number for ordinal scale');\n    xScale.range([0, dimensions.width]);\n    xScale.padding(padding / 2);\n  } else {\n    const { left, right } = isNaN(padding)\n      ? padding\n      : { left: padding, right: padding };\n    if (direction > 0) {\n      xScale.range([left, dimensions.width - right]);\n    } else {\n      xScale.range([dimensions.width - right, left]);\n    }\n  }\n  return xScale;\n}\n\nfunction pinchCoordinates(pinch) {\n  const { touch1Pos, touch2Pos } = pinch;\n\n  return {\n    topLeft: [\n      Math.min(touch1Pos[0], touch2Pos[0]),\n      Math.min(touch1Pos[1], touch2Pos[1]),\n    ],\n    bottomRight: [\n      Math.max(touch1Pos[0], touch2Pos[0]),\n      Math.max(touch1Pos[1], touch2Pos[1]),\n    ],\n  };\n}\n\nclass ChartCanvas extends Component {\n  constructor() {\n    super();\n    this.getDataInfo = this.getDataInfo.bind(this);\n    this.getCanvasContexts = this.getCanvasContexts.bind(this);\n\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseEnter = this.handleMouseEnter.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleZoom = this.handleZoom.bind(this);\n    this.handlePinchZoom = this.handlePinchZoom.bind(this);\n    this.handlePinchZoomEnd = this.handlePinchZoomEnd.bind(this);\n    this.handlePan = this.handlePan.bind(this);\n    this.handlePanEnd = this.handlePanEnd.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleDoubleClick = this.handleDoubleClick.bind(this);\n    this.handleContextMenu = this.handleContextMenu.bind(this);\n    this.handleDragStart = this.handleDragStart.bind(this);\n    this.handleDrag = this.handleDrag.bind(this);\n    this.handleDragEnd = this.handleDragEnd.bind(this);\n\n    this.panHelper = this.panHelper.bind(this);\n    this.pinchZoomHelper = this.pinchZoomHelper.bind(this);\n    this.xAxisZoom = this.xAxisZoom.bind(this);\n    this.yAxisZoom = this.yAxisZoom.bind(this);\n    this.resetYDomain = this.resetYDomain.bind(this);\n    this.calculateStateForDomain = this.calculateStateForDomain.bind(this);\n    this.generateSubscriptionId = this.generateSubscriptionId.bind(this);\n    this.draw = this.draw.bind(this);\n    this.redraw = this.redraw.bind(this);\n    this.getAllPanConditions = this.getAllPanConditions.bind(this);\n\n    this.subscriptions = [];\n    this.subscribe = this.subscribe.bind(this);\n    this.unsubscribe = this.unsubscribe.bind(this);\n    this.amIOnTop = this.amIOnTop.bind(this);\n    this.saveEventCaptureNode = this.saveEventCaptureNode.bind(this);\n    this.saveCanvasContainerNode = this.saveCanvasContainerNode.bind(this);\n    this.setCursorClass = this.setCursorClass.bind(this);\n    this.getMutableState = this.getMutableState.bind(this);\n    // this.canvasDrawCallbackList = [];\n    this.interactiveState = [];\n    this.panInProgress = false;\n\n    this.state = {};\n    this.mutableState = {};\n    this.lastSubscriptionId = 0;\n  }\n  saveEventCaptureNode(node) {\n    this.eventCaptureNode = node;\n  }\n  saveCanvasContainerNode(node) {\n    this.canvasContainerNode = node;\n  }\n  getMutableState() {\n    return this.mutableState;\n  }\n  getDataInfo() {\n    return {\n      ...this.state,\n      fullData: this.fullData,\n    };\n  }\n  getCanvasContexts() {\n    if (this.canvasContainerNode) {\n      return this.canvasContainerNode.getCanvasContexts();\n    }\n  }\n  generateSubscriptionId() {\n    this.lastSubscriptionId++;\n    return this.lastSubscriptionId;\n  }\n  clearBothCanvas() {\n    const canvases = this.getCanvasContexts();\n    if (canvases && canvases.axes) {\n      clearCanvas(\n        [\n          canvases.axes,\n          // canvases.hover,\n          canvases.mouseCoord,\n        ],\n        this.props.ratio\n      );\n    }\n  }\n  clearMouseCanvas() {\n    const canvases = this.getCanvasContexts();\n    if (canvases && canvases.mouseCoord) {\n      clearCanvas(\n        [\n          canvases.mouseCoord,\n          // canvases.hover,\n        ],\n        this.props.ratio\n      );\n    }\n  }\n  clearThreeCanvas() {\n    const canvases = this.getCanvasContexts();\n    if (canvases && canvases.axes) {\n      clearCanvas(\n        [\n          canvases.axes,\n          // canvases.hover,\n          canvases.mouseCoord,\n          canvases.bg,\n        ],\n        this.props.ratio\n      );\n    }\n  }\n  subscribe(id, rest) {\n    const {\n      getPanConditions = functor({\n        draggable: false,\n        panEnabled: true,\n      }),\n    } = rest;\n    this.subscriptions = this.subscriptions.concat({\n      id,\n      ...rest,\n      getPanConditions,\n    });\n  }\n  unsubscribe(id) {\n    this.subscriptions = this.subscriptions.filter(each => each.id !== id);\n  }\n  getAllPanConditions() {\n    return this.subscriptions.map(each => each.getPanConditions());\n  }\n  setCursorClass(className) {\n    if (this.eventCaptureNode != null) {\n      this.eventCaptureNode.setCursorClass(className);\n    }\n  }\n  amIOnTop(id) {\n    const dragableComponents = this.subscriptions.filter(\n      each => each.getPanConditions().draggable\n    );\n\n    return dragableComponents.length > 0 && last(dragableComponents).id === id;\n  }\n  handleContextMenu(mouseXY, e) {\n    const { xAccessor, chartConfig, plotData, xScale } = this.state;\n\n    const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n    const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n\n    this.triggerEvent(\n      'contextmenu',\n      {\n        mouseXY,\n        currentItem,\n        currentCharts,\n      },\n      e\n    );\n  }\n  calculateStateForDomain(newDomain) {\n    const {\n      xAccessor,\n      displayXAccessor,\n      xScale: initialXScale,\n      chartConfig: initialChartConfig,\n      plotData: initialPlotData,\n    } = this.state;\n    const { filterData } = this.state;\n    const { fullData } = this;\n    const { postCalculator } = this.props;\n\n    const { plotData: beforePlotData, domain } = filterData(\n      fullData,\n      newDomain,\n      xAccessor,\n      initialXScale,\n      {\n        currentPlotData: initialPlotData,\n        currentDomain: initialXScale.domain(),\n      }\n    );\n\n    const plotData = postCalculator(beforePlotData);\n    const updatedScale = initialXScale.copy().domain(domain);\n    const chartConfig = getChartConfigWithUpdatedYScales(\n      initialChartConfig,\n      { plotData, xAccessor, displayXAccessor, fullData },\n      updatedScale.domain()\n    );\n\n    return {\n      xScale: updatedScale,\n      plotData,\n      chartConfig,\n    };\n  }\n  pinchZoomHelper(initialPinch, finalPinch) {\n    const { xScale: initialPinchXScale } = initialPinch;\n\n    const {\n      xScale: initialXScale,\n      chartConfig: initialChartConfig,\n      plotData: initialPlotData,\n      xAccessor,\n      displayXAccessor,\n    } = this.state;\n    const { filterData } = this.state;\n    const { fullData } = this;\n    const { postCalculator } = this.props;\n\n    const { topLeft: iTL, bottomRight: iBR } = pinchCoordinates(initialPinch);\n    const { topLeft: fTL, bottomRight: fBR } = pinchCoordinates(finalPinch);\n\n    const e = initialPinchXScale.range()[1];\n\n    const xDash = Math.round(\n      -(iBR[0] * fTL[0] - iTL[0] * fBR[0]) / (iTL[0] - iBR[0])\n    );\n    const yDash = Math.round(\n      e +\n        ((e - iBR[0]) * (e - fTL[0]) - (e - iTL[0]) * (e - fBR[0])) /\n          (e - iTL[0] - (e - iBR[0]))\n    );\n\n    const x = Math.round((-xDash * iTL[0]) / (-xDash + fTL[0]));\n    const y = Math.round(\n      e - ((yDash - e) * (e - iTL[0])) / (yDash + (e - fTL[0]))\n    );\n\n    const newDomain = [x, y].map(initialPinchXScale.invert);\n    // var domainR = initial.right + right;\n\n    const { plotData: beforePlotData, domain } = filterData(\n      fullData,\n      newDomain,\n      xAccessor,\n      initialPinchXScale,\n      {\n        currentPlotData: initialPlotData,\n        currentDomain: initialXScale.domain(),\n      }\n    );\n\n    const plotData = postCalculator(beforePlotData);\n    const updatedScale = initialXScale.copy().domain(domain);\n\n    const mouseXY = finalPinch.touch1Pos;\n    const chartConfig = getChartConfigWithUpdatedYScales(\n      initialChartConfig,\n      { plotData, xAccessor, displayXAccessor, fullData },\n      updatedScale.domain()\n    );\n    const currentItem = getCurrentItem(\n      updatedScale,\n      xAccessor,\n      mouseXY,\n      plotData\n    );\n\n    return {\n      chartConfig,\n      xScale: updatedScale,\n      plotData,\n      mouseXY,\n      currentItem,\n    };\n  }\n  cancelDrag() {\n    this.eventCaptureNode.cancelDrag();\n    this.triggerEvent('dragcancel');\n  }\n  handlePinchZoom(initialPinch, finalPinch, e) {\n    if (!this.waitingForPinchZoomAnimationFrame) {\n      this.waitingForPinchZoomAnimationFrame = true;\n      const state = this.pinchZoomHelper(initialPinch, finalPinch);\n\n      this.triggerEvent('pinchzoom', state, e);\n\n      this.finalPinch = finalPinch;\n\n      requestAnimationFrame(() => {\n        this.clearBothCanvas();\n        this.draw({ trigger: 'pinchzoom' });\n        this.waitingForPinchZoomAnimationFrame = false;\n      });\n    }\n  }\n  handlePinchZoomEnd(initialPinch, e) {\n    const { xAccessor } = this.state;\n\n    if (this.finalPinch) {\n      const state = this.pinchZoomHelper(initialPinch, this.finalPinch);\n      const { xScale } = state;\n      this.triggerEvent('pinchzoom', state, e);\n\n      this.finalPinch = null;\n\n      this.clearThreeCanvas();\n\n      const { fullData } = this;\n      const firstItem = head(fullData);\n\n      const start = head(xScale.domain());\n      const end = xAccessor(firstItem);\n      const { onLoadMore } = this.props;\n\n      this.setState(state, () => {\n        if (start < end) {\n          onLoadMore(start, end);\n        }\n        if (this.props.onXScaleChange) {\n          this.props.onXScaleChange(xScale);\n        }\n      });\n    }\n  }\n  handleZoom(zoomDirection, mouseXY, e) {\n    if (this.panInProgress) return;\n    // console.log(\"zoomDirection \", zoomDirection, \" mouseXY \", mouseXY);\n    const {\n      xAccessor,\n      xScale: initialXScale,\n      plotData: initialPlotData,\n    } = this.state;\n    const { zoomMultiplier, zoomAnchor } = this.props;\n    const { fullData } = this;\n    const item = zoomAnchor({\n      xScale: initialXScale,\n      xAccessor,\n      mouseXY,\n      plotData: initialPlotData,\n      fullData,\n    });\n\n    const cx = initialXScale(item);\n    const c = zoomDirection > 0 ? 1 * zoomMultiplier : 1 / zoomMultiplier;\n    const newDomain = initialXScale\n      .range()\n      .map(x => cx + (x - cx) * c)\n      .map(initialXScale.invert);\n\n    const { xScale, plotData, chartConfig } =\n      this.calculateStateForDomain(newDomain);\n\n    const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n    const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n\n    this.clearThreeCanvas();\n\n    const firstItem = head(fullData);\n\n    const start = head(xScale.domain());\n    const end = xAccessor(firstItem);\n    const { onLoadMore } = this.props;\n\n    this.mutableState = {\n      mouseXY: mouseXY,\n      currentItem: currentItem,\n      currentCharts: currentCharts,\n    };\n\n    this.triggerEvent(\n      'zoom',\n      {\n        xScale,\n        plotData,\n        chartConfig,\n        mouseXY,\n        currentCharts,\n        currentItem,\n        show: true,\n      },\n      e\n    );\n\n    this.setState(\n      {\n        xScale,\n        plotData,\n        chartConfig,\n      },\n      () => {\n        if (start < end) {\n          onLoadMore(start, end);\n        }\n        if (this.props.onXScaleChange) {\n          this.props.onXScaleChange(xScale);\n        }\n      }\n    );\n  }\n  xAxisZoom(newDomain) {\n    const { xScale, plotData, chartConfig } =\n      this.calculateStateForDomain(newDomain);\n    this.clearThreeCanvas();\n\n    const { xAccessor } = this.state;\n    const { fullData } = this;\n    const firstItem = head(fullData);\n    const start = head(xScale.domain());\n    const end = xAccessor(firstItem);\n    const { onLoadMore } = this.props;\n\n    this.setState(\n      {\n        xScale,\n        plotData,\n        chartConfig,\n      },\n      () => {\n        if (start < end) onLoadMore(start, end);\n        if (this.props.onXScaleChange) {\n          this.props.onXScaleChange(xScale);\n        }\n      }\n    );\n  }\n  yAxisZoom(chartId, newDomain) {\n    this.clearThreeCanvas();\n    const { chartConfig: initialChartConfig } = this.state;\n    const chartConfig = initialChartConfig.map(each => {\n      if (each.id === chartId) {\n        const { yScale } = each;\n        return {\n          ...each,\n          yScale: yScale.copy().domain(newDomain),\n          yPanEnabled: true,\n        };\n      } else {\n        return each;\n      }\n    });\n\n    this.setState({\n      chartConfig,\n    });\n  }\n  triggerEvent(type, props, e) {\n    // console.log(\"triggering ->\", type);\n\n    this.subscriptions.forEach(each => {\n      const state = {\n        ...this.state,\n        fullData: this.fullData,\n        subscriptions: this.subscriptions,\n      };\n      each.listener(type, props, state, e);\n    });\n  }\n  draw(props) {\n    this.subscriptions.forEach(each => {\n      if (isDefined(each.draw)) each.draw(props);\n    });\n  }\n  redraw() {\n    this.clearThreeCanvas();\n    this.draw({ force: true });\n  }\n  panHelper(mouseXY, initialXScale, { dx, dy }, chartsToPan) {\n    const {\n      xAccessor,\n      displayXAccessor,\n      chartConfig: initialChartConfig,\n    } = this.state;\n    const { filterData } = this.state;\n    const { fullData } = this;\n    const { postCalculator } = this.props;\n\n    // console.log(dx, dy);\n    if (isNotDefined(initialXScale.invert))\n      throw new Error(\n        'xScale provided does not have an invert() method.' +\n          'You are likely using an ordinal scale. This scale does not support zoom, pan'\n      );\n\n    const newDomain = initialXScale\n      .range()\n      .map(x => x - dx)\n      .map(initialXScale.invert);\n\n    const { plotData: beforePlotData, domain } = filterData(\n      fullData,\n      newDomain,\n      xAccessor,\n      initialXScale,\n      {\n        currentPlotData: this.hackyWayToStopPanBeyondBounds__plotData,\n        currentDomain: this.hackyWayToStopPanBeyondBounds__domain,\n      }\n    );\n\n    const updatedScale = initialXScale.copy().domain(domain);\n    const plotData = postCalculator(beforePlotData);\n    // console.log(last(plotData));\n\n    const currentItem = getCurrentItem(\n      updatedScale,\n      xAccessor,\n      mouseXY,\n      plotData\n    );\n    const chartConfig = getChartConfigWithUpdatedYScales(\n      initialChartConfig,\n      { plotData, xAccessor, displayXAccessor, fullData },\n      updatedScale.domain(),\n      dy,\n      chartsToPan\n    );\n    const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n\n    // console.log(initialXScale.domain(), newDomain, updatedScale.domain());\n    return {\n      xScale: updatedScale,\n      plotData,\n      chartConfig,\n      mouseXY,\n      currentCharts,\n      currentItem,\n    };\n  }\n  handlePan(mousePosition, panStartXScale, dxdy, chartsToPan, e) {\n    if (!this.waitingForPanAnimationFrame) {\n      this.waitingForPanAnimationFrame = true;\n\n      this.hackyWayToStopPanBeyondBounds__plotData =\n        this.hackyWayToStopPanBeyondBounds__plotData || this.state.plotData;\n      this.hackyWayToStopPanBeyondBounds__domain =\n        this.hackyWayToStopPanBeyondBounds__domain ||\n        this.state.xScale.domain();\n\n      const state = this.panHelper(\n        mousePosition,\n        panStartXScale,\n        dxdy,\n        chartsToPan\n      );\n\n      this.hackyWayToStopPanBeyondBounds__plotData = state.plotData;\n      this.hackyWayToStopPanBeyondBounds__domain = state.xScale.domain();\n\n      this.panInProgress = true;\n      // console.log(panStartXScale.domain(), state.xScale.domain());\n\n      this.triggerEvent('pan', state, e);\n\n      this.mutableState = {\n        mouseXY: state.mouseXY,\n        currentItem: state.currentItem,\n        currentCharts: state.currentCharts,\n      };\n      requestAnimationFrame(() => {\n        this.waitingForPanAnimationFrame = false;\n        this.clearBothCanvas();\n        this.draw({ trigger: 'pan' });\n      });\n    }\n  }\n  handlePanEnd(mousePosition, panStartXScale, dxdy, chartsToPan, e) {\n    const state = this.panHelper(\n      mousePosition,\n      panStartXScale,\n      dxdy,\n      chartsToPan\n    );\n    // console.log(this.canvasDrawCallbackList.map(d => d.type));\n    this.hackyWayToStopPanBeyondBounds__plotData = null;\n    this.hackyWayToStopPanBeyondBounds__domain = null;\n\n    this.panInProgress = false;\n\n    // console.log(\"PANEND\", panEnd++);\n    const { xScale, plotData, chartConfig } = state;\n\n    this.triggerEvent('panend', state, e);\n\n    requestAnimationFrame(() => {\n      const { xAccessor } = this.state;\n      const { fullData } = this;\n\n      const firstItem = head(fullData);\n      const start = head(xScale.domain());\n      const end = xAccessor(firstItem);\n      // console.log(start, end, start < end ? \"Load more\" : \"I have it\");\n\n      const { onLoadMore } = this.props;\n\n      this.clearThreeCanvas();\n\n      this.setState(\n        {\n          xScale,\n          plotData,\n          chartConfig,\n        },\n        () => {\n          if (start < end) onLoadMore(start, end);\n          if (this.props.onXScaleChange) {\n            this.props.onXScaleChange(xScale);\n          }\n        }\n      );\n    });\n  }\n  handleMouseDown(mousePosition, currentCharts, e) {\n    this.triggerEvent('mousedown', this.mutableState, e);\n  }\n  handleMouseEnter(e) {\n    this.triggerEvent(\n      'mouseenter',\n      {\n        show: true,\n      },\n      e\n    );\n  }\n  handleMouseMove(mouseXY, inputType, e) {\n    if (!this.waitingForMouseMoveAnimationFrame) {\n      this.waitingForMouseMoveAnimationFrame = true;\n\n      const { chartConfig, plotData, xScale, xAccessor } = this.state;\n      const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n      const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n      this.triggerEvent(\n        'mousemove',\n        {\n          show: true,\n          mouseXY,\n          // prevMouseXY is used in interactive components\n          prevMouseXY: this.prevMouseXY,\n          currentItem,\n          currentCharts,\n        },\n        e\n      );\n\n      this.prevMouseXY = mouseXY;\n      this.mutableState = {\n        mouseXY,\n        currentItem,\n        currentCharts,\n      };\n\n      requestAnimationFrame(() => {\n        this.clearMouseCanvas();\n        this.draw({ trigger: 'mousemove' });\n        this.waitingForMouseMoveAnimationFrame = false;\n      });\n    }\n  }\n  handleMouseLeave(e) {\n    this.triggerEvent('mouseleave', { show: false }, e);\n    this.clearMouseCanvas();\n    this.draw({ trigger: 'mouseleave' });\n  }\n  handleDragStart({ startPos }, e) {\n    this.triggerEvent('dragstart', { startPos }, e);\n  }\n  handleDrag({ startPos, mouseXY }, e) {\n    const { chartConfig, plotData, xScale, xAccessor } = this.state;\n    const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n    const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n\n    this.triggerEvent(\n      'drag',\n      {\n        startPos,\n        mouseXY,\n        currentItem,\n        currentCharts,\n      },\n      e\n    );\n\n    this.mutableState = {\n      mouseXY,\n      currentItem,\n      currentCharts,\n    };\n\n    requestAnimationFrame(() => {\n      this.clearMouseCanvas();\n      this.draw({ trigger: 'drag' });\n    });\n  }\n  handleDragEnd({ mouseXY }, e) {\n    this.triggerEvent('dragend', { mouseXY }, e);\n\n    requestAnimationFrame(() => {\n      this.clearMouseCanvas();\n      this.draw({ trigger: 'dragend' });\n    });\n  }\n  handleClick(mousePosition, e) {\n    this.triggerEvent('click', this.mutableState, e);\n\n    requestAnimationFrame(() => {\n      this.clearMouseCanvas();\n      this.draw({ trigger: 'click' });\n    });\n  }\n  handleDoubleClick(mousePosition, e) {\n    this.triggerEvent('dblclick', {}, e);\n  }\n  getChildContext() {\n    const dimensions = getDimensions(this.props);\n    return {\n      fullData: this.fullData,\n      plotData: this.state.plotData,\n      width: dimensions.width,\n      height: dimensions.height,\n      chartConfig: this.state.chartConfig,\n      xScale: this.state.xScale,\n      xAccessor: this.state.xAccessor,\n      displayXAccessor: this.state.displayXAccessor,\n      chartCanvasType: this.props.type,\n      margin: this.props.margin,\n      ratio: this.props.ratio,\n      xAxisZoom: this.xAxisZoom,\n      yAxisZoom: this.yAxisZoom,\n      getCanvasContexts: this.getCanvasContexts,\n      redraw: this.redraw,\n      subscribe: this.subscribe,\n      unsubscribe: this.unsubscribe,\n      generateSubscriptionId: this.generateSubscriptionId,\n      getMutableState: this.getMutableState,\n      amIOnTop: this.amIOnTop,\n      setCursorClass: this.setCursorClass,\n    };\n  }\n  componentWillMount() {\n    const { fullData, ...state } = resetChart(this.props, true);\n    this.setState(state);\n    if (this.props.onXScaleChange) {\n      this.props.onXScaleChange(state.xScale);\n    }\n    this.fullData = fullData;\n  }\n  componentWillReceiveProps(nextProps) {\n    const reset = shouldResetChart(this.props, nextProps);\n\n    const interaction = isInteractionEnabled(\n      this.state.xScale,\n      this.state.xAccessor,\n      this.state.plotData\n    );\n    const { chartConfig: initialChartConfig } = this.state;\n\n    let newState;\n    if (\n      !interaction ||\n      reset ||\n      !shallowEqual(this.props.xExtents, nextProps.xExtents)\n    ) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (!interaction)\n          log('RESET CHART, changes to a non interactive chart');\n        else if (reset)\n          log(\n            'RESET CHART, one or more of these props changed',\n            CANDIDATES_FOR_RESET\n          );\n        else log('xExtents changed');\n      }\n      // do reset\n      newState = resetChart(nextProps);\n      this.mutableState = {};\n    } else {\n      const [start, end] = this.state.xScale.domain();\n      const prevLastItem = last(this.fullData);\n\n      const calculatedState = calculateFullData(nextProps);\n      const { xAccessor } = calculatedState;\n      const lastItemWasVisible =\n        xAccessor(prevLastItem) <= end && xAccessor(prevLastItem) >= start;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (this.props.data !== nextProps.data)\n          log(\n            'data is changed but seriesName did not, change the seriesName if you wish to reset the chart and lastItemWasVisible = ',\n            lastItemWasVisible\n          );\n        else\n          log(\n            'Trivial change, may be width/height or type changed, but that does not matter'\n          );\n      }\n\n      newState = updateChart(\n        calculatedState,\n        this.state.xScale,\n        nextProps,\n        lastItemWasVisible,\n        initialChartConfig\n      );\n    }\n\n    const { fullData, ...state } = newState;\n\n    if (this.panInProgress) {\n      if (process.env.NODE_ENV !== 'production') {\n        log('Pan is in progress');\n      }\n    } else {\n      /*\n\t\t\tif (!reset) {\n\t\t\t\tstate.chartConfig\n\t\t\t\t\t.forEach((each) => {\n\t\t\t\t\t\t// const sourceChartConfig = initialChartConfig.filter(d => d.id === each.id);\n\t\t\t\t\t\tconst prevChartConfig = find(initialChartConfig, d => d.id === each.id);\n\t\t\t\t\t\tif (isDefined(prevChartConfig) && prevChartConfig.yPanEnabled) {\n\t\t\t\t\t\t\teach.yScale.domain(prevChartConfig.yScale.domain());\n\t\t\t\t\t\t\teach.yPanEnabled = prevChartConfig.yPanEnabled;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\t*/\n      this.clearThreeCanvas();\n\n      this.setState(state, () => {\n        if (this.props.onXScaleChange) {\n          this.props.onXScaleChange(state.xScale);\n        }\n      });\n    }\n    this.fullData = fullData;\n  }\n  /*\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tconsole.error(this.state.chartConfig, this.state.chartConfig.map(d => d.yScale.domain()));\n\t}\n\t*/\n  resetYDomain(chartId) {\n    const { chartConfig } = this.state;\n    let changed = false;\n    const newChartConfig = chartConfig.map(each => {\n      if (\n        (isNotDefined(chartId) || each.id === chartId) &&\n        !shallowEqual(each.yScale.domain(), each.realYDomain)\n      ) {\n        changed = true;\n        return {\n          ...each,\n          yScale: each.yScale.domain(each.realYDomain),\n          yPanEnabled: false,\n        };\n      }\n      return each;\n    });\n\n    if (changed) {\n      this.clearThreeCanvas();\n      this.setState({\n        chartConfig: newChartConfig,\n      });\n    }\n  }\n  shouldComponentUpdate() {\n    // console.log(\"Happneing.....\", !this.panInProgress)\n    return !this.panInProgress;\n  }\n  render() {\n    const {\n      type,\n      height,\n      width,\n      margin,\n      className,\n      zIndex,\n      defaultFocus,\n      ratio,\n      mouseMoveEvent,\n      panEvent,\n      zoomEvent,\n    } = this.props;\n    const { useCrossHairStyleCursor, onSelect } = this.props;\n\n    const { plotData, xScale, xAccessor, chartConfig } = this.state;\n    const dimensions = getDimensions(this.props);\n\n    const interaction = isInteractionEnabled(xScale, xAccessor, plotData);\n\n    const cursorStyle = useCrossHairStyleCursor && interaction;\n    const cursor = getCursorStyle();\n    return (\n      <div\n        style={{ position: 'relative', width, height }}\n        className={className}\n        onClick={onSelect}\n      >\n        <CanvasContainer\n          ref={this.saveCanvasContainerNode}\n          type={type}\n          ratio={ratio}\n          width={width}\n          height={height}\n          zIndex={zIndex}\n        />\n        <svg\n          className={className}\n          width={width}\n          height={height}\n          style={{ position: 'absolute', zIndex: zIndex + 5 }}\n        >\n          {cursor}\n          <defs>\n            <clipPath id=\"chart-area-clip\">\n              <rect\n                x=\"0\"\n                y=\"0\"\n                width={dimensions.width}\n                height={dimensions.height}\n              />\n            </clipPath>\n            {chartConfig.map((each, idx) => (\n              <clipPath key={idx} id={`chart-area-clip-${each.id}`}>\n                <rect x=\"0\" y=\"0\" width={each.width} height={each.height} />\n              </clipPath>\n            ))}\n          </defs>\n          <g transform={`translate(${margin.left + 0.5}, ${margin.top + 0.5})`}>\n            <EventCapture\n              ref={this.saveEventCaptureNode}\n              useCrossHairStyleCursor={cursorStyle}\n              mouseMove={mouseMoveEvent && interaction}\n              zoom={zoomEvent && interaction}\n              pan={panEvent && interaction}\n              width={dimensions.width}\n              height={dimensions.height}\n              chartConfig={chartConfig}\n              xScale={xScale}\n              xAccessor={xAccessor}\n              focus={defaultFocus}\n              disableInteraction={this.props.disableInteraction}\n              getAllPanConditions={this.getAllPanConditions}\n              onContextMenu={this.handleContextMenu}\n              onClick={this.handleClick}\n              onDoubleClick={this.handleDoubleClick}\n              onMouseDown={this.handleMouseDown}\n              onMouseMove={this.handleMouseMove}\n              onMouseEnter={this.handleMouseEnter}\n              onMouseLeave={this.handleMouseLeave}\n              onDragStart={this.handleDragStart}\n              onDrag={this.handleDrag}\n              onDragComplete={this.handleDragEnd}\n              onZoom={this.handleZoom}\n              onPinchZoom={this.handlePinchZoom}\n              onPinchZoomEnd={this.handlePinchZoomEnd}\n              onPan={this.handlePan}\n              onPanEnd={this.handlePanEnd}\n            />\n\n            <g className=\"react-stockcharts-avoid-interaction\">\n              {this.props.children}\n            </g>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nfunction isInteractionEnabled(xScale, xAccessor, data) {\n  const interaction =\n    !isNaN(xScale(xAccessor(head(data)))) && isDefined(xScale.invert);\n  return interaction;\n}\n\nChartCanvas.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  margin: PropTypes.object,\n  ratio: PropTypes.number.isRequired,\n  // interval: PropTypes.oneOf([\"D\", \"W\", \"M\"]), // ,\"m1\", \"m5\", \"m15\", \"W\", \"M\"\n  type: PropTypes.oneOf(['svg', 'hybrid']),\n  pointsPerPxThreshold: PropTypes.number,\n  minPointsPerPxThreshold: PropTypes.number,\n  data: PropTypes.array.isRequired,\n  // initialDisplay: PropTypes.number,\n  xAccessor: PropTypes.func,\n  xExtents: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n  zoomAnchor: PropTypes.func,\n\n  className: PropTypes.string,\n  seriesName: PropTypes.string.isRequired,\n  zIndex: PropTypes.number,\n  children: PropTypes.node.isRequired,\n  xScale: PropTypes.func.isRequired,\n  postCalculator: PropTypes.func,\n  flipXScale: PropTypes.bool,\n  useCrossHairStyleCursor: PropTypes.bool,\n  padding: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.shape({\n      left: PropTypes.number,\n      right: PropTypes.number,\n    }),\n  ]),\n  defaultFocus: PropTypes.bool,\n  zoomMultiplier: PropTypes.number,\n  onLoadMore: PropTypes.func,\n  displayXAccessor: function (props, propName /* , componentName */) {\n    if (isNotDefined(props[propName])) {\n      console.warn(\n        '`displayXAccessor` is not defined,' +\n          ' will use the value from `xAccessor` as `displayXAccessor`.' +\n          ' This might be ok if you do not use a discontinuous scale' +\n          ' but if you do, provide a `displayXAccessor` prop to `ChartCanvas`'\n      );\n    } else if (typeof props[propName] !== 'function') {\n      return new Error('displayXAccessor has to be a function');\n    }\n  },\n  mouseMoveEvent: PropTypes.bool,\n  panEvent: PropTypes.bool,\n  clamp: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.bool,\n    PropTypes.func,\n  ]),\n  zoomEvent: PropTypes.bool,\n  onSelect: PropTypes.func,\n  maintainPointsPerPixelOnResize: PropTypes.bool,\n  disableInteraction: PropTypes.bool,\n  onXScaleChange: PropTypes.func,\n};\n\nChartCanvas.defaultProps = {\n  margin: { top: 20, right: 30, bottom: 30, left: 80 },\n  type: 'hybrid',\n  pointsPerPxThreshold: 2,\n  minPointsPerPxThreshold: 1 / 100,\n  className: 'react-stockchart',\n  zIndex: 1,\n  xExtents: [min, max],\n  postCalculator: identity,\n  padding: 0,\n  xAccessor: identity,\n  flipXScale: false,\n  useCrossHairStyleCursor: true,\n  defaultFocus: true,\n  onLoadMore: noop,\n  onSelect: noop,\n  mouseMoveEvent: true,\n  panEvent: true,\n  zoomEvent: true,\n  zoomMultiplier: 1.1,\n  clamp: false,\n  zoomAnchor: mouseBasedZoomAnchor,\n  maintainPointsPerPixelOnResize: true,\n  // ratio: 2,\n  disableInteraction: false,\n};\n\nChartCanvas.childContextTypes = {\n  plotData: PropTypes.array,\n  fullData: PropTypes.array,\n  chartConfig: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n      origin: PropTypes.arrayOf(PropTypes.number).isRequired,\n      padding: PropTypes.oneOfType([\n        PropTypes.number,\n        PropTypes.shape({\n          top: PropTypes.number,\n          bottom: PropTypes.number,\n        }),\n      ]),\n      yExtents: PropTypes.arrayOf(PropTypes.func),\n      yExtentsProvider: PropTypes.func,\n      yScale: PropTypes.func.isRequired,\n      mouseCoordinates: PropTypes.shape({\n        at: PropTypes.string,\n        format: PropTypes.func,\n      }),\n      width: PropTypes.number.isRequired,\n      height: PropTypes.number.isRequired,\n    })\n  ).isRequired,\n  xScale: PropTypes.func.isRequired,\n  xAccessor: PropTypes.func.isRequired,\n  displayXAccessor: PropTypes.func.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  chartCanvasType: PropTypes.oneOf(['svg', 'hybrid']).isRequired,\n  margin: PropTypes.object.isRequired,\n  ratio: PropTypes.number.isRequired,\n  getCanvasContexts: PropTypes.func,\n  xAxisZoom: PropTypes.func,\n  yAxisZoom: PropTypes.func,\n  amIOnTop: PropTypes.func,\n  redraw: PropTypes.func,\n  subscribe: PropTypes.func,\n  unsubscribe: PropTypes.func,\n  setCursorClass: PropTypes.func,\n  generateSubscriptionId: PropTypes.func,\n  getMutableState: PropTypes.func,\n};\n\nChartCanvas.ohlcv = d => ({\n  date: d.date,\n  open: d.open,\n  high: d.high,\n  low: d.low,\n  close: d.close,\n  volume: d.volume,\n});\n\nexport default ChartCanvas;\n"]}