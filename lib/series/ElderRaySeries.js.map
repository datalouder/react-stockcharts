{"version":3,"sources":["../../../src/lib/series/ElderRaySeries.js"],"names":["ElderRaySeries","props","fillForEachBar","bind","yAccessorTop","yAccessorBullTop","yAccessorBearTop","yAccessorBullBottom","yAccessorBearBottom","yAccessorForBarBase","d","yAccessor","Math","max","bullPower","undefined","bearPower","min","xScale","yScale","y","yAccessorNumber","bullPowerFill","bearPowerFill","className","opacity","stroke","straightLineStroke","straightLineOpacity","widthRatio","clip","Component","propTypes","PropTypes","string","func","number","bool","isRequired","defaultProps"],"mappings":"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","file":"ElderRaySeries.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport OverlayBarSeries from './OverlayBarSeries';\nimport StraightLine from './StraightLine';\n\nclass ElderRaySeries extends Component {\n  constructor(props) {\n    super(props);\n    this.fillForEachBar = this.fillForEachBar.bind(this);\n    this.yAccessorTop = this.yAccessorTop.bind(this);\n    this.yAccessorBullTop = this.yAccessorBullTop.bind(this);\n    this.yAccessorBearTop = this.yAccessorBearTop.bind(this);\n    this.yAccessorBullBottom = this.yAccessorBullBottom.bind(this);\n    this.yAccessorBearBottom = this.yAccessorBearBottom.bind(this);\n    this.yAccessorForBarBase = this.yAccessorForBarBase.bind(this);\n  }\n  yAccessorTop(d) {\n    const { yAccessor } = this.props;\n    return yAccessor(d) && Math.max(yAccessor(d).bullPower, 0);\n  }\n  yAccessorBullTop(d) {\n    const { yAccessor } = this.props;\n    return (\n      yAccessor(d) &&\n      (yAccessor(d).bullPower > 0 ? yAccessor(d).bullPower : undefined)\n    );\n  }\n  yAccessorBearTop(d) {\n    const { yAccessor } = this.props;\n    return (\n      yAccessor(d) &&\n      (yAccessor(d).bearPower > 0 ? yAccessor(d).bearPower : undefined)\n    );\n  }\n  yAccessorBullBottom(d) {\n    const { yAccessor } = this.props;\n    return yAccessor(d) && (yAccessor(d).bullPower < 0 ? 0 : undefined);\n  }\n  yAccessorBearBottom(d) {\n    const { yAccessor } = this.props;\n    return (\n      yAccessor(d) &&\n      (yAccessor(d).bullPower < 0 ||\n      yAccessor(d).bullPower * yAccessor(d).bearPower < 0 // bullPower is +ve and bearPower is -ve\n        ? Math.min(0, yAccessor(d).bullPower)\n        : undefined)\n    );\n  }\n  yAccessorForBarBase(xScale, yScale, d) {\n    const { yAccessor } = this.props;\n    const y = yAccessor(d) && Math.min(yAccessor(d).bearPower, 0);\n    return yScale(y);\n  }\n  fillForEachBar(d, yAccessorNumber) {\n    const { bullPowerFill, bearPowerFill } = this.props;\n    return yAccessorNumber % 2 === 0 ? bullPowerFill : bearPowerFill;\n  }\n  render() {\n    const {\n      className,\n      opacity,\n      stroke,\n      straightLineStroke,\n      straightLineOpacity,\n      widthRatio,\n    } = this.props;\n    const { clip } = this.props;\n\n    return (\n      <g className={className}>\n        <OverlayBarSeries\n          baseAt={this.yAccessorForBarBase}\n          className=\"react-stockcharts-elderray-bar\"\n          stroke={stroke}\n          fill={this.fillForEachBar}\n          opacity={opacity}\n          widthRatio={widthRatio}\n          clip={clip}\n          yAccessor={[\n            this.yAccessorBullTop,\n            this.yAccessorBearTop,\n            this.yAccessorBullBottom,\n            this.yAccessorBearBottom,\n          ]}\n        />\n        <StraightLine\n          className=\"react-stockcharts-elderray-straight-line\"\n          yValue={0}\n          stroke={straightLineStroke}\n          opacity={straightLineOpacity}\n        />\n      </g>\n    );\n  }\n}\n\nElderRaySeries.propTypes = {\n  className: PropTypes.string,\n  yAccessor: PropTypes.func,\n  opacity: PropTypes.number,\n  stroke: PropTypes.bool,\n  bullPowerFill: PropTypes.string,\n  bearPowerFill: PropTypes.string,\n  straightLineStroke: PropTypes.string,\n  straightLineOpacity: PropTypes.number,\n  widthRatio: PropTypes.number,\n  clip: PropTypes.bool.isRequired,\n};\n\nElderRaySeries.defaultProps = {\n  className: 'react-stockcharts-elderray-series',\n  straightLineStroke: '#000000',\n  straightLineOpacity: 0.3,\n  opacity: 0.5,\n  stroke: true,\n  bullPowerFill: '#6BA583',\n  bearPowerFill: '#FF0000',\n  widthRatio: 0.8,\n  clip: true,\n};\n\nexport default ElderRaySeries;\n"]}