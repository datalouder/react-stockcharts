{"version":3,"sources":["../../src/lib/Chart.js"],"names":["Chart","props","context","yScale","bind","listener","id","subscribe","unsubscribe","type","moreProps","state","e","onContextMenu","currentCharts","indexOf","chartConfig","each","copy","chartId","origin","x","y","children","PureComponent","propTypes","height","PropTypes","number","oneOfType","array","func","string","isRequired","yExtents","yExtentsCalculator","propName","componentName","Error","flipYScale","bool","padding","shape","top","bottom","node","defaultProps","yPan","yPanEnabled","noop","contextTypes","childContextTypes","object"],"mappings":"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","file":"Chart.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { scaleLinear } from 'd3-scale';\n\nimport PureComponent from './utils/PureComponent';\nimport { isNotDefined, noop, find } from './utils';\n\nclass Chart extends PureComponent {\n  constructor(props, context) {\n    super(props, context);\n    this.yScale = this.yScale.bind(this);\n    this.listener = this.listener.bind(this);\n  }\n  componentWillMount() {\n    const { id } = this.props;\n    const { subscribe } = this.context;\n    subscribe('chart_' + id, {\n      listener: this.listener,\n    });\n  }\n  componentWillUnmount() {\n    const { id } = this.props;\n    const { unsubscribe } = this.context;\n    unsubscribe('chart_' + id);\n  }\n  listener(type, moreProps, state, e) {\n    const { id, onContextMenu } = this.props;\n\n    if (type === 'contextmenu') {\n      const { currentCharts } = moreProps;\n      if (currentCharts.indexOf(id) > -1) {\n        onContextMenu(moreProps, e);\n      }\n    }\n  }\n  yScale() {\n    const chartConfig = find(\n      this.context.chartConfig,\n      each => each.id === this.props.id\n    );\n    return chartConfig.yScale.copy();\n  }\n  getChildContext() {\n    const { id: chartId } = this.props;\n    const chartConfig = find(\n      this.context.chartConfig,\n      each => each.id === chartId\n    );\n\n    return {\n      chartId,\n      chartConfig,\n    };\n  }\n  render() {\n    const { origin } = find(\n      this.context.chartConfig,\n      each => each.id === this.props.id\n    );\n    const [x, y] = origin;\n\n    return <g transform={`translate(${x}, ${y})`}>{this.props.children}</g>;\n  }\n}\n\nChart.propTypes = {\n  height: PropTypes.number,\n  origin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n  id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n  yExtents: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n  yExtentsCalculator: function (props, propName, componentName) {\n    if (\n      isNotDefined(props.yExtents) &&\n      typeof props.yExtentsCalculator !== 'function'\n    )\n      return new Error(\n        'yExtents or yExtentsCalculator must' +\n          ` be present on ${componentName}. Validation failed.`\n      );\n  },\n  onContextMenu: PropTypes.func,\n  yScale: PropTypes.func,\n\n  flipYScale: PropTypes.bool,\n  padding: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.shape({\n      top: PropTypes.number,\n      bottom: PropTypes.number,\n    }),\n  ]),\n  children: PropTypes.node,\n};\n\nChart.defaultProps = {\n  id: 0,\n  origin: [0, 0],\n  padding: 0,\n  yScale: scaleLinear(),\n  flipYScale: false,\n  yPan: true,\n  yPanEnabled: false,\n  onContextMenu: noop,\n};\n\nChart.contextTypes = {\n  chartConfig: PropTypes.array,\n  subscribe: PropTypes.func.isRequired,\n  unsubscribe: PropTypes.func.isRequired,\n};\n\nChart.childContextTypes = {\n  chartConfig: PropTypes.object.isRequired,\n  chartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n};\n\nexport default Chart;\n"]}